/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2017 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
define(["exports","./defined-b9ff0e39","./Check-e6691f86","./freezeObject-2d5b18ce","./defaultValue-199f5aa8","./Math-2145e044","./Cartesian2-40ed5530","./defineProperties-ae15c9d5","./RuntimeError-d5522ee3","./when-c208a7cf"],function(e,D,Q,t,A,Z,z,r,J,d){"use strict";function n(e){this._ellipsoid=A.defaultValue(e,z.Ellipsoid.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}r.defineProperties(n.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),n.prototype.project=function(e,t){var r=this._semimajorAxis,n=e.longitude*r,a=e.latitude*r,i=e.height;return D.defined(t)?(t.x=n,t.y=a,t.z=i,t):new z.Cartesian3(n,a,i)},n.prototype.unproject=function(e,t){if(!D.defined(e))throw new Q.DeveloperError("cartesian is required");var r=this._oneOverSemimajorAxis,n=e.x*r,a=e.y*r,i=e.z;return D.defined(t)?(t.longitude=n,t.latitude=a,t.height=i,t):new z.Cartographic(n,a,i)};var o=t.freezeObject({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function s(e,t){this.start=A.defaultValue(e,0),this.stop=A.defaultValue(t,0)}function X(e,t,r,n,a,i,o,s,u){this[0]=A.defaultValue(e,0),this[1]=A.defaultValue(n,0),this[2]=A.defaultValue(o,0),this[3]=A.defaultValue(t,0),this[4]=A.defaultValue(a,0),this[5]=A.defaultValue(s,0),this[6]=A.defaultValue(r,0),this[7]=A.defaultValue(i,0),this[8]=A.defaultValue(u,0)}X.packedLength=9,X.pack=function(e,t,r){return Q.Check.typeOf.object("value",e),Q.Check.defined("array",t),r=A.defaultValue(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t},X.unpack=function(e,t,r){return Q.Check.defined("array",e),t=A.defaultValue(t,0),D.defined(r)||(r=new X),r[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r},X.clone=function(e,t){if(D.defined(e))return D.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new X(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},X.fromArray=function(e,t,r){return Q.Check.defined("array",e),t=A.defaultValue(t,0),D.defined(r)||(r=new X),r[0]=e[t],r[1]=e[t+1],r[2]=e[t+2],r[3]=e[t+3],r[4]=e[t+4],r[5]=e[t+5],r[6]=e[t+6],r[7]=e[t+7],r[8]=e[t+8],r},X.fromColumnMajorArray=function(e,t){return Q.Check.defined("values",e),X.clone(e,t)},X.fromRowMajorArray=function(e,t){return Q.Check.defined("values",e),D.defined(t)?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new X(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},X.fromQuaternion=function(e,t){Q.Check.typeOf.object("quaternion",e);var r=e.x*e.x,n=e.x*e.y,a=e.x*e.z,i=e.x*e.w,o=e.y*e.y,s=e.y*e.z,u=e.y*e.w,c=e.z*e.z,l=e.z*e.w,f=e.w*e.w,d=r-o-c+f,h=2*(n-l),p=2*(a+u),y=2*(n+l),m=o-r-c+f,C=2*(s-i),w=2*(a-u),v=2*(s+i),O=-r-o+c+f;return D.defined(t)?(t[0]=d,t[1]=y,t[2]=w,t[3]=h,t[4]=m,t[5]=v,t[6]=p,t[7]=C,t[8]=O,t):new X(d,h,p,y,m,C,w,v,O)},X.fromHeadingPitchRoll=function(e,t){Q.Check.typeOf.object("headingPitchRoll",e);var r=Math.cos(-e.pitch),n=Math.cos(-e.heading),a=Math.cos(e.roll),i=Math.sin(-e.pitch),o=Math.sin(-e.heading),s=Math.sin(e.roll),u=r*n,c=-a*o+s*i*n,l=s*o+a*i*n,f=r*o,d=a*n+s*i*o,h=-s*n+a*i*o,p=-i,y=s*r,m=a*r;return D.defined(t)?(t[0]=u,t[1]=f,t[2]=p,t[3]=c,t[4]=d,t[5]=y,t[6]=l,t[7]=h,t[8]=m,t):new X(u,c,l,f,d,h,p,y,m)},X.fromScale=function(e,t){return Q.Check.typeOf.object("scale",e),D.defined(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new X(e.x,0,0,0,e.y,0,0,0,e.z)},X.fromUniformScale=function(e,t){return Q.Check.typeOf.number("scale",e),D.defined(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new X(e,0,0,0,e,0,0,0,e)},X.fromCrossProduct=function(e,t){return Q.Check.typeOf.object("vector",e),D.defined(t)?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new X(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},X.fromRotationX=function(e,t){Q.Check.typeOf.number("angle",e);var r=Math.cos(e),n=Math.sin(e);return D.defined(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=r,t[5]=n,t[6]=0,t[7]=-n,t[8]=r,t):new X(1,0,0,0,r,-n,0,n,r)},X.fromRotationY=function(e,t){Q.Check.typeOf.number("angle",e);var r=Math.cos(e),n=Math.sin(e);return D.defined(t)?(t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=1,t[5]=0,t[6]=n,t[7]=0,t[8]=r,t):new X(r,0,n,0,1,0,-n,0,r)},X.fromRotationZ=function(e,t){Q.Check.typeOf.number("angle",e);var r=Math.cos(e),n=Math.sin(e);return D.defined(t)?(t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new X(r,-n,0,n,r,0,0,0,1)},X.toArray=function(e,t){return Q.Check.typeOf.object("matrix",e),D.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},X.getElementIndex=function(e,t){return Q.Check.typeOf.number.greaterThanOrEquals("row",t,0),Q.Check.typeOf.number.lessThanOrEquals("row",t,2),Q.Check.typeOf.number.greaterThanOrEquals("column",e,0),Q.Check.typeOf.number.lessThanOrEquals("column",e,2),3*e+t},X.getColumn=function(e,t,r){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.number.greaterThanOrEquals("index",t,0),Q.Check.typeOf.number.lessThanOrEquals("index",t,2),Q.Check.typeOf.object("result",r);var n=3*t,a=e[n],i=e[1+n],o=e[2+n];return r.x=a,r.y=i,r.z=o,r},X.setColumn=function(e,t,r,n){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.number.greaterThanOrEquals("index",t,0),Q.Check.typeOf.number.lessThanOrEquals("index",t,2),Q.Check.typeOf.object("cartesian",r),Q.Check.typeOf.object("result",n);var a=3*t;return(n=X.clone(e,n))[a]=r.x,n[1+a]=r.y,n[2+a]=r.z,n},X.getRow=function(e,t,r){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.number.greaterThanOrEquals("index",t,0),Q.Check.typeOf.number.lessThanOrEquals("index",t,2),Q.Check.typeOf.object("result",r);var n=e[t],a=e[t+3],i=e[t+6];return r.x=n,r.y=a,r.z=i,r},X.setRow=function(e,t,r,n){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.number.greaterThanOrEquals("index",t,0),Q.Check.typeOf.number.lessThanOrEquals("index",t,2),Q.Check.typeOf.object("cartesian",r),Q.Check.typeOf.object("result",n),(n=X.clone(e,n))[t]=r.x,n[t+3]=r.y,n[t+6]=r.z,n};var a=new z.Cartesian3;X.getScale=function(e,t){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t),t.x=z.Cartesian3.magnitude(z.Cartesian3.fromElements(e[0],e[1],e[2],a)),t.y=z.Cartesian3.magnitude(z.Cartesian3.fromElements(e[3],e[4],e[5],a)),t.z=z.Cartesian3.magnitude(z.Cartesian3.fromElements(e[6],e[7],e[8],a)),t};var i=new z.Cartesian3;X.getMaximumScale=function(e){return X.getScale(e,i),z.Cartesian3.maximumComponent(i)},X.multiply=function(e,t,r){Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r);var n=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],a=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],i=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],o=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],u=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],c=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],l=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],f=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return r[0]=n,r[1]=a,r[2]=i,r[3]=o,r[4]=s,r[5]=u,r[6]=c,r[7]=l,r[8]=f,r},X.add=function(e,t,r){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r},X.subtract=function(e,t,r){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r},X.multiplyByVector=function(e,t,r){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("cartesian",t),Q.Check.typeOf.object("result",r);var n=t.x,a=t.y,i=t.z,o=e[0]*n+e[3]*a+e[6]*i,s=e[1]*n+e[4]*a+e[7]*i,u=e[2]*n+e[5]*a+e[8]*i;return r.x=o,r.y=s,r.z=u,r},X.multiplyByScalar=function(e,t,r){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.number("scalar",t),Q.Check.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r},X.multiplyByScale=function(e,t,r){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("scale",t),Q.Check.typeOf.object("result",r),r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.x,r[3]=e[3]*t.y,r[4]=e[4]*t.y,r[5]=e[5]*t.y,r[6]=e[6]*t.z,r[7]=e[7]*t.z,r[8]=e[8]*t.z,r},X.negate=function(e,t){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},X.transpose=function(e,t){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t);var r=e[0],n=e[3],a=e[6],i=e[1],o=e[4],s=e[7],u=e[2],c=e[5],l=e[8];return t[0]=r,t[1]=n,t[2]=a,t[3]=i,t[4]=o,t[5]=s,t[6]=u,t[7]=c,t[8]=l,t};var u=new z.Cartesian3(1,1,1);X.getRotation=function(e,t){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t);var r=z.Cartesian3.divideComponents(u,X.getScale(e,i),i);return t=X.multiplyByScale(e,r,t)};var h=[1,0,0],p=[2,2,1];function c(e){for(var t=0,r=0;r<3;++r){var n=e[X.getElementIndex(p[r],h[r])];t+=2*n*n}return Math.sqrt(t)}function l(e,t){for(var r=Z.CesiumMath.EPSILON15,n=0,a=1,i=0;i<3;++i){var o=Math.abs(e[X.getElementIndex(p[i],h[i])]);n<o&&(a=i,n=o)}var s=1,u=0,c=h[a],l=p[a];if(Math.abs(e[X.getElementIndex(l,c)])>r){var f,d=(e[X.getElementIndex(l,l)]-e[X.getElementIndex(c,c)])/2/e[X.getElementIndex(l,c)];u=(f=d<0?-1/(-d+Math.sqrt(1+d*d)):1/(d+Math.sqrt(1+d*d)))*(s=1/Math.sqrt(1+f*f))}return(t=X.clone(X.IDENTITY,t))[X.getElementIndex(c,c)]=t[X.getElementIndex(l,l)]=s,t[X.getElementIndex(l,c)]=u,t[X.getElementIndex(c,l)]=-u,t}var f=new X,y=new X;function G(e,t,r,n){this.x=A.defaultValue(e,0),this.y=A.defaultValue(t,0),this.z=A.defaultValue(r,0),this.w=A.defaultValue(n,0)}X.computeEigenDecomposition=function(e,t){Q.Check.typeOf.object("matrix",e);var r=Z.CesiumMath.EPSILON20,n=0,a=0;D.defined(t)||(t={});for(var i=t.unitary=X.clone(X.IDENTITY,t.unitary),o=t.diagonal=X.clone(e,t.diagonal),s=r*function(e){for(var t=0,r=0;r<9;++r){var n=e[r];t+=n*n}return Math.sqrt(t)}(o);a<10&&c(o)>s;)l(o,f),X.transpose(f,y),X.multiply(o,f,o),X.multiply(y,o,o),X.multiply(i,f,i),2<++n&&(++a,n=0);return t},X.abs=function(e,t){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},X.determinant=function(e){Q.Check.typeOf.object("matrix",e);var t=e[0],r=e[3],n=e[6],a=e[1],i=e[4],o=e[7],s=e[2],u=e[5],c=e[8];return t*(i*c-u*o)+a*(u*n-r*c)+s*(r*o-i*n)},X.inverse=function(e,t){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t);var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=X.determinant(e);if(Math.abs(f)<=Z.CesiumMath.EPSILON15)throw new Q.DeveloperError("matrix is not invertible");return t[0]=o*l-c*s,t[1]=c*a-n*l,t[2]=n*s-o*a,t[3]=u*s-i*l,t[4]=r*l-u*a,t[5]=i*a-r*s,t[6]=i*c-u*o,t[7]=u*n-r*c,t[8]=r*o-i*n,X.multiplyByScalar(t,1/f,t)},X.equals=function(e,t){return e===t||D.defined(e)&&D.defined(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},X.equalsEpsilon=function(e,t,r){return Q.Check.typeOf.number("epsilon",r),e===t||D.defined(e)&&D.defined(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r},X.IDENTITY=t.freezeObject(new X(1,0,0,0,1,0,0,0,1)),X.ZERO=t.freezeObject(new X(0,0,0,0,0,0,0,0,0)),X.COLUMN0ROW0=0,X.COLUMN0ROW1=1,X.COLUMN0ROW2=2,X.COLUMN1ROW0=3,X.COLUMN1ROW1=4,X.COLUMN1ROW2=5,X.COLUMN2ROW0=6,X.COLUMN2ROW1=7,X.COLUMN2ROW2=8,r.defineProperties(X.prototype,{length:{get:function(){return X.packedLength}}}),X.prototype.clone=function(e){return X.clone(this,e)},X.prototype.equals=function(e){return X.equals(this,e)},X.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]},X.prototype.equalsEpsilon=function(e,t){return X.equalsEpsilon(this,e,t)},X.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n("+this[1]+", "+this[4]+", "+this[7]+")\n("+this[2]+", "+this[5]+", "+this[8]+")"},G.fromElements=function(e,t,r,n,a){return D.defined(a)?(a.x=e,a.y=t,a.z=r,a.w=n,a):new G(e,t,r,n)},G.fromColor=function(e,t){return Q.Check.typeOf.object("color",e),D.defined(t)?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new G(e.red,e.green,e.blue,e.alpha)},G.clone=function(e,t){if(D.defined(e))return D.defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new G(e.x,e.y,e.z,e.w)},G.packedLength=4,G.pack=function(e,t,r){return Q.Check.typeOf.object("value",e),Q.Check.defined("array",t),r=A.defaultValue(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},G.unpack=function(e,t,r){return Q.Check.defined("array",e),t=A.defaultValue(t,0),D.defined(r)||(r=new G),r.x=e[t++],r.y=e[t++],r.z=e[t++],r.w=e[t],r},G.packArray=function(e,t){Q.Check.defined("array",e);var r=e.length;D.defined(t)?t.length=4*r:t=new Array(4*r);for(var n=0;n<r;++n)G.pack(e[n],t,4*n);return t},G.unpackArray=function(e,t){Q.Check.defined("array",e);var r=e.length;D.defined(t)?t.length=r/4:t=new Array(r/4);for(var n=0;n<r;n+=4){var a=n/4;t[a]=G.unpack(e,n,t[a])}return t},G.fromArray=G.unpack,G.maximumComponent=function(e){return Q.Check.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z,e.w)},G.minimumComponent=function(e){return Q.Check.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z,e.w)},G.minimumByComponent=function(e,t,r){return Q.Check.typeOf.object("first",e),Q.Check.typeOf.object("second",t),Q.Check.typeOf.object("result",r),r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r.w=Math.min(e.w,t.w),r},G.maximumByComponent=function(e,t,r){return Q.Check.typeOf.object("first",e),Q.Check.typeOf.object("second",t),Q.Check.typeOf.object("result",r),r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r.w=Math.max(e.w,t.w),r},G.magnitudeSquared=function(e){return Q.Check.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},G.magnitude=function(e){return Math.sqrt(G.magnitudeSquared(e))};var m=new G;G.distance=function(e,t){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),G.subtract(e,t,m),G.magnitude(m)},G.distanceSquared=function(e,t){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),G.subtract(e,t,m),G.magnitudeSquared(m)},G.normalize=function(e,t){Q.Check.typeOf.object("cartesian",e),Q.Check.typeOf.object("result",t);var r=G.magnitude(e);if(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,t.w=e.w/r,isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||isNaN(t.w))throw new Q.DeveloperError("normalized result is not a number");return t},G.dot=function(e,t){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},G.multiplyComponents=function(e,t,r){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r),r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r.w=e.w*t.w,r},G.divideComponents=function(e,t,r){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r),r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r.w=e.w/t.w,r},G.add=function(e,t,r){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},G.subtract=function(e,t,r){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},G.multiplyByScalar=function(e,t,r){return Q.Check.typeOf.object("cartesian",e),Q.Check.typeOf.number("scalar",t),Q.Check.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},G.divideByScalar=function(e,t,r){return Q.Check.typeOf.object("cartesian",e),Q.Check.typeOf.number("scalar",t),Q.Check.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},G.negate=function(e,t){return Q.Check.typeOf.object("cartesian",e),Q.Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},G.abs=function(e,t){return Q.Check.typeOf.object("cartesian",e),Q.Check.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};var C=new G;G.lerp=function(e,t,r,n){return Q.Check.typeOf.object("start",e),Q.Check.typeOf.object("end",t),Q.Check.typeOf.number("t",r),Q.Check.typeOf.object("result",n),G.multiplyByScalar(t,r,C),n=G.multiplyByScalar(e,1-r,n),G.add(C,n,n)};var w=new G;G.mostOrthogonalAxis=function(e,t){Q.Check.typeOf.object("cartesian",e),Q.Check.typeOf.object("result",t);var r=G.normalize(e,w);return G.abs(r,r),t=r.x<=r.y?r.x<=r.z?r.x<=r.w?G.clone(G.UNIT_X,t):G.clone(G.UNIT_W,t):r.z<=r.w?G.clone(G.UNIT_Z,t):G.clone(G.UNIT_W,t):r.y<=r.z?r.y<=r.w?G.clone(G.UNIT_Y,t):G.clone(G.UNIT_W,t):r.z<=r.w?G.clone(G.UNIT_Z,t):G.clone(G.UNIT_W,t)},G.equals=function(e,t){return e===t||D.defined(e)&&D.defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},G.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]&&e.w===t[r+3]},G.equalsEpsilon=function(e,t,r,n){return e===t||D.defined(e)&&D.defined(t)&&Z.CesiumMath.equalsEpsilon(e.x,t.x,r,n)&&Z.CesiumMath.equalsEpsilon(e.y,t.y,r,n)&&Z.CesiumMath.equalsEpsilon(e.z,t.z,r,n)&&Z.CesiumMath.equalsEpsilon(e.w,t.w,r,n)},G.ZERO=t.freezeObject(new G(0,0,0,0)),G.UNIT_X=t.freezeObject(new G(1,0,0,0)),G.UNIT_Y=t.freezeObject(new G(0,1,0,0)),G.UNIT_Z=t.freezeObject(new G(0,0,1,0)),G.UNIT_W=t.freezeObject(new G(0,0,0,1)),G.prototype.clone=function(e){return G.clone(this,e)},G.prototype.equals=function(e){return G.equals(this,e)},G.prototype.equalsEpsilon=function(e,t,r){return G.equalsEpsilon(this,e,t,r)},G.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var v=new Float32Array(1),O=256;G.packFloat=function(e,t){if(Q.Check.typeOf.number("value",e),D.defined(t)||(t=new G),v[0]=e,0===(e=v[0]))return G.clone(G.ZERO,t);var r,n=e<0?1:0;isFinite(e)?(e=Math.abs(e),r=Math.floor(Z.CesiumMath.logBase(e,10))+1,e/=Math.pow(10,r)):(e=.1,r=38);var a=e*O;return t.x=Math.floor(a),a=(a-t.x)*O,t.y=Math.floor(a),a=(a-t.y)*O,t.z=Math.floor(a),t.w=2*(r+38)+n,t},G.unpackFloat=function(e){Q.Check.typeOf.object("packedFloat",e);var t=e.w/2,r=Math.floor(t),n=2*(t-r);if(n=-(n=2*n-1),38<=(r-=38))return n<0?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;var a=n*e.x*.00390625;return a+=n*e.y*(1/65536),(a+=n*e.z*(1/16777216))*Math.pow(10,r)};var b={};function g(e,t){if(!D.defined(e))throw new Q.DeveloperError("identifier is required.");D.defined(b[e])||(b[e]=!0,console.warn(A.defaultValue(t,e)))}function x(e,t){if(!D.defined(e)||!D.defined(t))throw new Q.DeveloperError("identifier and message are required.");g(e,t)}function K(e,t,r,n,a,i,o,s,u,c,l,f,d,h,p,y){this[0]=A.defaultValue(e,0),this[1]=A.defaultValue(a,0),this[2]=A.defaultValue(u,0),this[3]=A.defaultValue(d,0),this[4]=A.defaultValue(t,0),this[5]=A.defaultValue(i,0),this[6]=A.defaultValue(c,0),this[7]=A.defaultValue(h,0),this[8]=A.defaultValue(r,0),this[9]=A.defaultValue(o,0),this[10]=A.defaultValue(l,0),this[11]=A.defaultValue(p,0),this[12]=A.defaultValue(n,0),this[13]=A.defaultValue(s,0),this[14]=A.defaultValue(f,0),this[15]=A.defaultValue(y,0)}g.geometryOutlines="Entity geometry outlines are unsupported on terrain. Outlines will be disabled. To enable outlines, disable geometry terrain clamping by explicitly setting height to 0.",g.geometryZIndex="Entity geometry with zIndex are unsupported when height or extrudedHeight are defined.  zIndex will be ignored",g.geometryHeightReference="Entity corridor, ellipse, polygon or rectangle with heightReference must also have a defined height.  heightReference will be ignored",g.geometryExtrudedHeightReference="Entity corridor, ellipse, polygon or rectangle with extrudedHeightReference must also have a defined extrudedHeight.  extrudedHeightReference will be ignored",K.packedLength=16,K.pack=function(e,t,r){return Q.Check.typeOf.object("value",e),Q.Check.defined("array",t),r=A.defaultValue(r,0),t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t[r++]=e[9],t[r++]=e[10],t[r++]=e[11],t[r++]=e[12],t[r++]=e[13],t[r++]=e[14],t[r]=e[15],t},K.unpack=function(e,t,r){return Q.Check.defined("array",e),t=A.defaultValue(t,0),D.defined(r)||(r=new K),r[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r[9]=e[t++],r[10]=e[t++],r[11]=e[t++],r[12]=e[t++],r[13]=e[t++],r[14]=e[t++],r[15]=e[t],r},K.clone=function(e,t){if(D.defined(e))return D.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new K(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},K.fromArray=K.unpack,K.fromColumnMajorArray=function(e,t){return Q.Check.defined("values",e),K.clone(e,t)},K.fromRowMajorArray=function(e,t){return Q.Check.defined("values",e),D.defined(t)?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new K(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},K.fromRotationTranslation=function(e,t,r){return Q.Check.typeOf.object("rotation",e),t=A.defaultValue(t,z.Cartesian3.ZERO),D.defined(r)?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r):new K(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},K.fromTranslationQuaternionRotationScale=function(e,t,r,n){Q.Check.typeOf.object("translation",e),Q.Check.typeOf.object("rotation",t),Q.Check.typeOf.object("scale",r),D.defined(n)||(n=new K);var a=r.x,i=r.y,o=r.z,s=t.x*t.x,u=t.x*t.y,c=t.x*t.z,l=t.x*t.w,f=t.y*t.y,d=t.y*t.z,h=t.y*t.w,p=t.z*t.z,y=t.z*t.w,m=t.w*t.w,C=s-f-p+m,w=2*(u-y),v=2*(c+h),O=2*(u+y),b=f-s-p+m,g=2*(d-l),x=2*(c-h),E=2*(d+l),k=-s-f+p+m;return n[0]=C*a,n[1]=O*a,n[2]=x*a,n[3]=0,n[4]=w*i,n[5]=b*i,n[6]=E*i,n[7]=0,n[8]=v*o,n[9]=g*o,n[10]=k*o,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n},K.fromTranslationRotationScale=function(e,t){return Q.Check.typeOf.object("translationRotationScale",e),K.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},K.fromTranslation=function(e,t){return Q.Check.typeOf.object("translation",e),K.fromRotationTranslation(X.IDENTITY,e,t)},K.fromScale=function(e,t){return Q.Check.typeOf.object("scale",e),D.defined(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new K(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},K.fromUniformScale=function(e,t){return Q.Check.typeOf.number("scale",e),D.defined(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new K(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)};var E=new z.Cartesian3,k=new z.Cartesian3,q=new z.Cartesian3;K.fromCamera=function(e,t){Q.Check.typeOf.object("camera",e);var r=e.position,n=e.direction,a=e.up;Q.Check.typeOf.object("camera.position",r),Q.Check.typeOf.object("camera.direction",n),Q.Check.typeOf.object("camera.up",a),z.Cartesian3.normalize(n,E),z.Cartesian3.normalize(z.Cartesian3.cross(E,a,k),k),z.Cartesian3.normalize(z.Cartesian3.cross(k,E,q),q);var i=k.x,o=k.y,s=k.z,u=E.x,c=E.y,l=E.z,f=q.x,d=q.y,h=q.z,p=r.x,y=r.y,m=r.z,C=i*-p+o*-y+s*-m,w=f*-p+d*-y+h*-m,v=u*p+c*y+l*m;return D.defined(t)?(t[0]=i,t[1]=f,t[2]=-u,t[3]=0,t[4]=o,t[5]=d,t[6]=-c,t[7]=0,t[8]=s,t[9]=h,t[10]=-l,t[11]=0,t[12]=C,t[13]=w,t[14]=v,t[15]=1,t):new K(i,o,s,C,f,d,h,w,-u,-c,-l,v,0,0,0,1)},K.computePerspectiveFieldOfView=function(e,t,r,n,a){Q.Check.typeOf.number.greaterThan("fovY",e,0),Q.Check.typeOf.number.lessThan("fovY",e,Math.PI),Q.Check.typeOf.number.greaterThan("near",r,0),Q.Check.typeOf.number.greaterThan("far",n,0),Q.Check.typeOf.object("result",a);var i=1/Math.tan(.5*e),o=i/t,s=(n+r)/(r-n),u=2*n*r/(r-n);return a[0]=o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=s,a[11]=-1,a[12]=0,a[13]=0,a[14]=u,a[15]=0,a},K.computeOrthographicOffCenter=function(e,t,r,n,a,i,o){Q.Check.typeOf.number("left",e),Q.Check.typeOf.number("right",t),Q.Check.typeOf.number("bottom",r),Q.Check.typeOf.number("top",n),Q.Check.typeOf.number("near",a),Q.Check.typeOf.number("far",i),Q.Check.typeOf.object("result",o);var s=1/(t-e),u=1/(n-r),c=1/(i-a),l=-(t+e)*s,f=-(n+r)*u,d=-(i+a)*c;return s*=2,u*=2,c*=-2,o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=c,o[11]=0,o[12]=l,o[13]=f,o[14]=d,o[15]=1,o},K.computePerspectiveOffCenter=function(e,t,r,n,a,i,o){Q.Check.typeOf.number("left",e),Q.Check.typeOf.number("right",t),Q.Check.typeOf.number("bottom",r),Q.Check.typeOf.number("top",n),Q.Check.typeOf.number("near",a),Q.Check.typeOf.number("far",i),Q.Check.typeOf.object("result",o);var s=2*a/(t-e),u=2*a/(n-r),c=(t+e)/(t-e),l=(n+r)/(n-r),f=-(i+a)/(i-a),d=-2*i*a/(i-a);return o[0]=s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=c,o[9]=l,o[10]=f,o[11]=-1,o[12]=0,o[13]=0,o[14]=d,o[15]=0,o},K.computeInfinitePerspectiveOffCenter=function(e,t,r,n,a,i){Q.Check.typeOf.number("left",e),Q.Check.typeOf.number("right",t),Q.Check.typeOf.number("bottom",r),Q.Check.typeOf.number("top",n),Q.Check.typeOf.number("near",a),Q.Check.typeOf.object("result",i);var o=2*a/(t-e),s=2*a/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),l=-2*a;return i[0]=o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=s,i[6]=0,i[7]=0,i[8]=u,i[9]=c,i[10]=-1,i[11]=-1,i[12]=0,i[13]=0,i[14]=l,i[15]=0,i},K.computeViewportTransformation=function(e,t,r,n){Q.Check.typeOf.object("result",n),e=A.defaultValue(e,A.defaultValue.EMPTY_OBJECT);var a=A.defaultValue(e.x,0),i=A.defaultValue(e.y,0),o=A.defaultValue(e.width,0),s=A.defaultValue(e.height,0);t=A.defaultValue(t,0);var u=.5*o,c=.5*s,l=.5*((r=A.defaultValue(r,1))-t),f=u,d=c,h=l,p=a+u,y=i+c,m=t+l;return n[0]=f,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=d,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=h,n[11]=0,n[12]=p,n[13]=y,n[14]=m,n[15]=1,n},K.computeView=function(e,t,r,n,a){return Q.Check.typeOf.object("position",e),Q.Check.typeOf.object("direction",t),Q.Check.typeOf.object("up",r),Q.Check.typeOf.object("right",n),Q.Check.typeOf.object("result",a),a[0]=n.x,a[1]=r.x,a[2]=-t.x,a[3]=0,a[4]=n.y,a[5]=r.y,a[6]=-t.y,a[7]=0,a[8]=n.z,a[9]=r.z,a[10]=-t.z,a[11]=0,a[12]=-z.Cartesian3.dot(n,e),a[13]=-z.Cartesian3.dot(r,e),a[14]=z.Cartesian3.dot(t,e),a[15]=1,a},K.toArray=function(e,t){return Q.Check.typeOf.object("matrix",e),D.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},K.getElementIndex=function(e,t){return Q.Check.typeOf.number.greaterThanOrEquals("row",t,0),Q.Check.typeOf.number.lessThanOrEquals("row",t,3),Q.Check.typeOf.number.greaterThanOrEquals("column",e,0),Q.Check.typeOf.number.lessThanOrEquals("column",e,3),4*e+t},K.getColumn=function(e,t,r){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.number.greaterThanOrEquals("index",t,0),Q.Check.typeOf.number.lessThanOrEquals("index",t,3),Q.Check.typeOf.object("result",r);var n=4*t,a=e[n],i=e[1+n],o=e[2+n],s=e[3+n];return r.x=a,r.y=i,r.z=o,r.w=s,r},K.setColumn=function(e,t,r,n){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.number.greaterThanOrEquals("index",t,0),Q.Check.typeOf.number.lessThanOrEquals("index",t,3),Q.Check.typeOf.object("cartesian",r),Q.Check.typeOf.object("result",n);var a=4*t;return(n=K.clone(e,n))[a]=r.x,n[1+a]=r.y,n[2+a]=r.z,n[3+a]=r.w,n},K.setTranslation=function(e,t,r){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("translation",t),Q.Check.typeOf.object("result",r),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=e[15],r};var j=new z.Cartesian3;K.setScale=function(e,t,r){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("scale",t),Q.Check.typeOf.object("result",r);var n=K.getScale(e,j),a=z.Cartesian3.divideComponents(t,n,j);return K.multiplyByScale(e,a,r)},K.getRow=function(e,t,r){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.number.greaterThanOrEquals("index",t,0),Q.Check.typeOf.number.lessThanOrEquals("index",t,3),Q.Check.typeOf.object("result",r);var n=e[t],a=e[t+4],i=e[t+8],o=e[t+12];return r.x=n,r.y=a,r.z=i,r.w=o,r},K.setRow=function(e,t,r,n){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.number.greaterThanOrEquals("index",t,0),Q.Check.typeOf.number.lessThanOrEquals("index",t,3),Q.Check.typeOf.object("cartesian",r),Q.Check.typeOf.object("result",n),(n=K.clone(e,n))[t]=r.x,n[t+4]=r.y,n[t+8]=r.z,n[t+12]=r.w,n};var _=new z.Cartesian3;K.getScale=function(e,t){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t),t.x=z.Cartesian3.magnitude(z.Cartesian3.fromElements(e[0],e[1],e[2],_)),t.y=z.Cartesian3.magnitude(z.Cartesian3.fromElements(e[4],e[5],e[6],_)),t.z=z.Cartesian3.magnitude(z.Cartesian3.fromElements(e[8],e[9],e[10],_)),t};var S=new z.Cartesian3;K.getMaximumScale=function(e){return K.getScale(e,S),z.Cartesian3.maximumComponent(S)},K.multiply=function(e,t,r){Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r);var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],h=e[10],p=e[11],y=e[12],m=e[13],C=e[14],w=e[15],v=t[0],O=t[1],b=t[2],g=t[3],x=t[4],E=t[5],k=t[6],q=t[7],j=t[8],_=t[9],S=t[10],M=t[11],R=t[12],T=t[13],D=t[14],A=t[15],z=n*v+s*O+f*b+y*g,I=a*v+u*O+d*b+m*g,P=i*v+c*O+h*b+C*g,N=o*v+l*O+p*b+w*g,U=n*x+s*E+f*k+y*q,F=a*x+u*E+d*k+m*q,V=i*x+c*E+h*k+C*q,L=o*x+l*E+p*k+w*q,B=n*j+s*_+f*S+y*M,W=a*j+u*_+d*S+m*M,Y=i*j+c*_+h*S+C*M,H=o*j+l*_+p*S+w*M,Z=n*R+s*T+f*D+y*A,J=a*R+u*T+d*D+m*A,X=i*R+c*T+h*D+C*A,G=o*R+l*T+p*D+w*A;return r[0]=z,r[1]=I,r[2]=P,r[3]=N,r[4]=U,r[5]=F,r[6]=V,r[7]=L,r[8]=B,r[9]=W,r[10]=Y,r[11]=H,r[12]=Z,r[13]=J,r[14]=X,r[15]=G,r},K.add=function(e,t,r){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r},K.subtract=function(e,t,r){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r},K.multiplyTransformation=function(e,t,r){Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r);var n=e[0],a=e[1],i=e[2],o=e[4],s=e[5],u=e[6],c=e[8],l=e[9],f=e[10],d=e[12],h=e[13],p=e[14],y=t[0],m=t[1],C=t[2],w=t[4],v=t[5],O=t[6],b=t[8],g=t[9],x=t[10],E=t[12],k=t[13],q=t[14],j=n*y+o*m+c*C,_=a*y+s*m+l*C,S=i*y+u*m+f*C,M=n*w+o*v+c*O,R=a*w+s*v+l*O,T=i*w+u*v+f*O,D=n*b+o*g+c*x,A=a*b+s*g+l*x,z=i*b+u*g+f*x,I=n*E+o*k+c*q+d,P=a*E+s*k+l*q+h,N=i*E+u*k+f*q+p;return r[0]=j,r[1]=_,r[2]=S,r[3]=0,r[4]=M,r[5]=R,r[6]=T,r[7]=0,r[8]=D,r[9]=A,r[10]=z,r[11]=0,r[12]=I,r[13]=P,r[14]=N,r[15]=1,r},K.multiplyByMatrix3=function(e,t,r){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("rotation",t),Q.Check.typeOf.object("result",r);var n=e[0],a=e[1],i=e[2],o=e[4],s=e[5],u=e[6],c=e[8],l=e[9],f=e[10],d=t[0],h=t[1],p=t[2],y=t[3],m=t[4],C=t[5],w=t[6],v=t[7],O=t[8],b=n*d+o*h+c*p,g=a*d+s*h+l*p,x=i*d+u*h+f*p,E=n*y+o*m+c*C,k=a*y+s*m+l*C,q=i*y+u*m+f*C,j=n*w+o*v+c*O,_=a*w+s*v+l*O,S=i*w+u*v+f*O;return r[0]=b,r[1]=g,r[2]=x,r[3]=0,r[4]=E,r[5]=k,r[6]=q,r[7]=0,r[8]=j,r[9]=_,r[10]=S,r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},K.multiplyByTranslation=function(e,t,r){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("translation",t),Q.Check.typeOf.object("result",r);var n=t.x,a=t.y,i=t.z,o=n*e[0]+a*e[4]+i*e[8]+e[12],s=n*e[1]+a*e[5]+i*e[9]+e[13],u=n*e[2]+a*e[6]+i*e[10]+e[14];return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=o,r[13]=s,r[14]=u,r[15]=e[15],r};var M=new z.Cartesian3;K.multiplyByUniformScale=function(e,t,r){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.number("scale",t),Q.Check.typeOf.object("result",r),M.x=t,M.y=t,M.z=t,K.multiplyByScale(e,M,r)},K.multiplyByScale=function(e,t,r){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("scale",t),Q.Check.typeOf.object("result",r);var n=t.x,a=t.y,i=t.z;return 1===n&&1===a&&1===i?K.clone(e,r):(r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=0,r[4]=a*e[4],r[5]=a*e[5],r[6]=a*e[6],r[7]=0,r[8]=i*e[8],r[9]=i*e[9],r[10]=i*e[10],r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=1,r)},K.multiplyByVector=function(e,t,r){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("cartesian",t),Q.Check.typeOf.object("result",r);var n=t.x,a=t.y,i=t.z,o=t.w,s=e[0]*n+e[4]*a+e[8]*i+e[12]*o,u=e[1]*n+e[5]*a+e[9]*i+e[13]*o,c=e[2]*n+e[6]*a+e[10]*i+e[14]*o,l=e[3]*n+e[7]*a+e[11]*i+e[15]*o;return r.x=s,r.y=u,r.z=c,r.w=l,r},K.multiplyByPointAsVector=function(e,t,r){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("cartesian",t),Q.Check.typeOf.object("result",r);var n=t.x,a=t.y,i=t.z,o=e[0]*n+e[4]*a+e[8]*i,s=e[1]*n+e[5]*a+e[9]*i,u=e[2]*n+e[6]*a+e[10]*i;return r.x=o,r.y=s,r.z=u,r},K.multiplyByPoint=function(e,t,r){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("cartesian",t),Q.Check.typeOf.object("result",r);var n=t.x,a=t.y,i=t.z,o=e[0]*n+e[4]*a+e[8]*i+e[12],s=e[1]*n+e[5]*a+e[9]*i+e[13],u=e[2]*n+e[6]*a+e[10]*i+e[14];return r.x=o,r.y=s,r.z=u,r},K.multiplyByScalar=function(e,t,r){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.number("scalar",t),Q.Check.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r},K.negate=function(e,t){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},K.transpose=function(e,t){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t);var r=e[1],n=e[2],a=e[3],i=e[6],o=e[7],s=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[10]=e[10],t[11]=e[14],t[12]=a,t[13]=o,t[14]=s,t[15]=e[15],t},K.abs=function(e,t){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},K.equals=function(e,t){return e===t||D.defined(e)&&D.defined(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]},K.equalsEpsilon=function(e,t,r){return Q.Check.typeOf.number("epsilon",r),e===t||D.defined(e)&&D.defined(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r&&Math.abs(e[9]-t[9])<=r&&Math.abs(e[10]-t[10])<=r&&Math.abs(e[11]-t[11])<=r&&Math.abs(e[12]-t[12])<=r&&Math.abs(e[13]-t[13])<=r&&Math.abs(e[14]-t[14])<=r&&Math.abs(e[15]-t[15])<=r},K.getTranslation=function(e,t){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t),t.x=e[12],t.y=e[13],t.z=e[14],t},K.getRotation=function(e,t){return x("Matrix4.getRotation","Matrix4.getRotation is deprecated and will be removed in Cesium 1.65. Use Matrix4.getMatrix3 instead."),K.getMatrix3(e,t)},K.getMatrix3=function(e,t){return Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};var $=new X,ee=new X,te=new G,re=new G(0,0,0,1);function I(e,t){this.center=z.Cartesian3.clone(A.defaultValue(e,z.Cartesian3.ZERO)),this.radius=A.defaultValue(t,0)}K.inverse=function(e,t){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t);var r=e[0],n=e[4],a=e[8],i=e[12],o=e[1],s=e[5],u=e[9],c=e[13],l=e[2],f=e[6],d=e[10],h=e[14],p=e[3],y=e[7],m=e[11],C=e[15],w=d*C,v=h*m,O=f*C,b=h*y,g=f*m,x=d*y,E=l*C,k=h*p,q=l*m,j=d*p,_=l*y,S=f*p,M=w*s+b*u+g*c-(v*s+O*u+x*c),R=v*o+E*u+j*c-(w*o+k*u+q*c),T=O*o+k*s+_*c-(b*o+E*s+S*c),D=x*o+q*s+S*u-(g*o+j*s+_*u),A=v*n+O*a+x*i-(w*n+b*a+g*i),z=w*r+k*a+q*i-(v*r+E*a+j*i),I=b*r+E*n+S*i-(O*r+k*n+_*i),P=g*r+j*n+_*a-(x*r+q*n+S*a),N=(w=a*c)*y+(b=i*s)*m+(g=n*u)*C-((v=i*u)*y+(O=n*c)*m+(x=a*s)*C),U=v*p+(E=r*c)*m+(j=a*o)*C-(w*p+(k=i*o)*m+(q=r*u)*C),F=O*p+k*y+(_=r*s)*C-(b*p+E*y+(S=n*o)*C),V=x*p+q*y+S*m-(g*p+j*y+_*m),L=O*d+x*h+v*f-(g*h+w*f+b*d),B=q*h+w*l+k*d-(E*d+j*h+v*l),W=E*f+S*h+b*l-(_*h+O*l+k*f),Y=_*d+g*l+j*f-(q*f+S*d+x*l),H=r*M+n*R+a*T+i*D;if(Math.abs(H)<Z.CesiumMath.EPSILON21){if(X.equalsEpsilon(K.getMatrix3(e,$),ee,Z.CesiumMath.EPSILON7)&&G.equals(K.getRow(e,3,te),re))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new J.RuntimeError("matrix is not invertible because its determinate is zero.")}return H=1/H,t[0]=M*H,t[1]=R*H,t[2]=T*H,t[3]=D*H,t[4]=A*H,t[5]=z*H,t[6]=I*H,t[7]=P*H,t[8]=N*H,t[9]=U*H,t[10]=F*H,t[11]=V*H,t[12]=L*H,t[13]=B*H,t[14]=W*H,t[15]=Y*H,t},K.inverseTransformation=function(e,t){Q.Check.typeOf.object("matrix",e),Q.Check.typeOf.object("result",t);var r=e[0],n=e[1],a=e[2],i=e[4],o=e[5],s=e[6],u=e[8],c=e[9],l=e[10],f=e[12],d=e[13],h=e[14],p=-r*f-n*d-a*h,y=-i*f-o*d-s*h,m=-u*f-c*d-l*h;return t[0]=r,t[1]=i,t[2]=u,t[3]=0,t[4]=n,t[5]=o,t[6]=c,t[7]=0,t[8]=a,t[9]=s,t[10]=l,t[11]=0,t[12]=p,t[13]=y,t[14]=m,t[15]=1,t},K.IDENTITY=t.freezeObject(new K(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),K.ZERO=t.freezeObject(new K(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),K.COLUMN0ROW0=0,K.COLUMN0ROW1=1,K.COLUMN0ROW2=2,K.COLUMN0ROW3=3,K.COLUMN1ROW0=4,K.COLUMN1ROW1=5,K.COLUMN1ROW2=6,K.COLUMN1ROW3=7,K.COLUMN2ROW0=8,K.COLUMN2ROW1=9,K.COLUMN2ROW2=10,K.COLUMN2ROW3=11,K.COLUMN3ROW0=12,K.COLUMN3ROW1=13,K.COLUMN3ROW2=14,K.COLUMN3ROW3=15,r.defineProperties(K.prototype,{length:{get:function(){return K.packedLength}}}),K.prototype.clone=function(e){return K.clone(this,e)},K.prototype.equals=function(e){return K.equals(this,e)},K.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]&&e[9]===t[r+9]&&e[10]===t[r+10]&&e[11]===t[r+11]&&e[12]===t[r+12]&&e[13]===t[r+13]&&e[14]===t[r+14]&&e[15]===t[r+15]},K.prototype.equalsEpsilon=function(e,t){return K.equalsEpsilon(this,e,t)},K.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"};var P=new z.Cartesian3,N=new z.Cartesian3,U=new z.Cartesian3,F=new z.Cartesian3,V=new z.Cartesian3,L=new z.Cartesian3,B=new z.Cartesian3,W=new z.Cartesian3,Y=new z.Cartesian3,H=new z.Cartesian3,ne=new z.Cartesian3,ae=new z.Cartesian3,R=4/3*Z.CesiumMath.PI;I.fromPoints=function(e,t){if(D.defined(t)||(t=new I),!D.defined(e)||0===e.length)return t.center=z.Cartesian3.clone(z.Cartesian3.ZERO,t.center),t.radius=0,t;var r,n=z.Cartesian3.clone(e[0],B),a=z.Cartesian3.clone(n,P),i=z.Cartesian3.clone(n,N),o=z.Cartesian3.clone(n,U),s=z.Cartesian3.clone(n,F),u=z.Cartesian3.clone(n,V),c=z.Cartesian3.clone(n,L),l=e.length;for(r=1;r<l;r++){z.Cartesian3.clone(e[r],n);var f=n.x,d=n.y,h=n.z;f<a.x&&z.Cartesian3.clone(n,a),f>s.x&&z.Cartesian3.clone(n,s),d<i.y&&z.Cartesian3.clone(n,i),d>u.y&&z.Cartesian3.clone(n,u),h<o.z&&z.Cartesian3.clone(n,o),h>c.z&&z.Cartesian3.clone(n,c)}var p=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(s,a,W)),y=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(u,i,W)),m=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(c,o,W)),C=a,w=s,v=p;v<y&&(v=y,C=i,w=u),v<m&&(v=m,C=o,w=c);var O=Y;O.x=.5*(C.x+w.x),O.y=.5*(C.y+w.y),O.z=.5*(C.z+w.z);var b=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(w,O,W)),g=Math.sqrt(b),x=H;x.x=a.x,x.y=i.y,x.z=o.z;var E=ne;E.x=s.x,E.y=u.y,E.z=c.z;var k=z.Cartesian3.midpoint(x,E,ae),q=0;for(r=0;r<l;r++){z.Cartesian3.clone(e[r],n);var j=z.Cartesian3.magnitude(z.Cartesian3.subtract(n,k,W));q<j&&(q=j);var _=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(n,O,W));if(b<_){var S=Math.sqrt(_);b=(g=.5*(g+S))*g;var M=S-g;O.x=(g*O.x+M*n.x)/S,O.y=(g*O.y+M*n.y)/S,O.z=(g*O.z+M*n.z)/S}}return g<q?(z.Cartesian3.clone(O,t.center),t.radius=g):(z.Cartesian3.clone(k,t.center),t.radius=q),t};var T=new n,ie=new z.Cartesian3,oe=new z.Cartesian3,se=new z.Cartographic,ue=new z.Cartographic;I.fromRectangle2D=function(e,t,r){return I.fromRectangleWithHeights2D(e,t,0,0,r)},I.fromRectangleWithHeights2D=function(e,t,r,n,a){if(D.defined(a)||(a=new I),!D.defined(e))return a.center=z.Cartesian3.clone(z.Cartesian3.ZERO,a.center),a.radius=0,a;t=A.defaultValue(t,T),z.Rectangle.southwest(e,se),se.height=r,z.Rectangle.northeast(e,ue),ue.height=n;var i=t.project(se,ie),o=t.project(ue,oe),s=o.x-i.x,u=o.y-i.y,c=o.z-i.z;a.radius=.5*Math.sqrt(s*s+u*u+c*c);var l=a.center;return l.x=i.x+.5*s,l.y=i.y+.5*u,l.z=i.z+.5*c,a};var ce=[];I.fromRectangle3D=function(e,t,r,n){if(t=A.defaultValue(t,z.Ellipsoid.WGS84),r=A.defaultValue(r,0),D.defined(n)||(n=new I),!D.defined(e))return n.center=z.Cartesian3.clone(z.Cartesian3.ZERO,n.center),n.radius=0,n;var a=z.Rectangle.subsample(e,t,r,ce);return I.fromPoints(a,n)},I.fromVertices=function(e,t,r,n){if(D.defined(n)||(n=new I),!D.defined(e)||0===e.length)return n.center=z.Cartesian3.clone(z.Cartesian3.ZERO,n.center),n.radius=0,n;t=A.defaultValue(t,z.Cartesian3.ZERO),r=A.defaultValue(r,3),Q.Check.typeOf.number.greaterThanOrEquals("stride",r,3);var a=B;a.x=e[0]+t.x,a.y=e[1]+t.y,a.z=e[2]+t.z;var i,o=z.Cartesian3.clone(a,P),s=z.Cartesian3.clone(a,N),u=z.Cartesian3.clone(a,U),c=z.Cartesian3.clone(a,F),l=z.Cartesian3.clone(a,V),f=z.Cartesian3.clone(a,L),d=e.length;for(i=0;i<d;i+=r){var h=e[i]+t.x,p=e[i+1]+t.y,y=e[i+2]+t.z;a.x=h,a.y=p,a.z=y,h<o.x&&z.Cartesian3.clone(a,o),h>c.x&&z.Cartesian3.clone(a,c),p<s.y&&z.Cartesian3.clone(a,s),p>l.y&&z.Cartesian3.clone(a,l),y<u.z&&z.Cartesian3.clone(a,u),y>f.z&&z.Cartesian3.clone(a,f)}var m=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(c,o,W)),C=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(l,s,W)),w=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(f,u,W)),v=o,O=c,b=m;b<C&&(b=C,v=s,O=l),b<w&&(b=w,v=u,O=f);var g=Y;g.x=.5*(v.x+O.x),g.y=.5*(v.y+O.y),g.z=.5*(v.z+O.z);var x=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(O,g,W)),E=Math.sqrt(x),k=H;k.x=o.x,k.y=s.y,k.z=u.z;var q=ne;q.x=c.x,q.y=l.y,q.z=f.z;var j=z.Cartesian3.midpoint(k,q,ae),_=0;for(i=0;i<d;i+=r){a.x=e[i]+t.x,a.y=e[i+1]+t.y,a.z=e[i+2]+t.z;var S=z.Cartesian3.magnitude(z.Cartesian3.subtract(a,j,W));_<S&&(_=S);var M=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(a,g,W));if(x<M){var R=Math.sqrt(M);x=(E=.5*(E+R))*E;var T=R-E;g.x=(E*g.x+T*a.x)/R,g.y=(E*g.y+T*a.y)/R,g.z=(E*g.z+T*a.z)/R}}return E<_?(z.Cartesian3.clone(g,n.center),n.radius=E):(z.Cartesian3.clone(j,n.center),n.radius=_),n},I.fromEncodedCartesianVertices=function(e,t,r){if(D.defined(r)||(r=new I),!D.defined(e)||!D.defined(t)||e.length!==t.length||0===e.length)return r.center=z.Cartesian3.clone(z.Cartesian3.ZERO,r.center),r.radius=0,r;var n=B;n.x=e[0]+t[0],n.y=e[1]+t[1],n.z=e[2]+t[2];var a,i=z.Cartesian3.clone(n,P),o=z.Cartesian3.clone(n,N),s=z.Cartesian3.clone(n,U),u=z.Cartesian3.clone(n,F),c=z.Cartesian3.clone(n,V),l=z.Cartesian3.clone(n,L),f=e.length;for(a=0;a<f;a+=3){var d=e[a]+t[a],h=e[a+1]+t[a+1],p=e[a+2]+t[a+2];n.x=d,n.y=h,n.z=p,d<i.x&&z.Cartesian3.clone(n,i),d>u.x&&z.Cartesian3.clone(n,u),h<o.y&&z.Cartesian3.clone(n,o),h>c.y&&z.Cartesian3.clone(n,c),p<s.z&&z.Cartesian3.clone(n,s),p>l.z&&z.Cartesian3.clone(n,l)}var y=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(u,i,W)),m=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(c,o,W)),C=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(l,s,W)),w=i,v=u,O=y;O<m&&(O=m,w=o,v=c),O<C&&(O=C,w=s,v=l);var b=Y;b.x=.5*(w.x+v.x),b.y=.5*(w.y+v.y),b.z=.5*(w.z+v.z);var g=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(v,b,W)),x=Math.sqrt(g),E=H;E.x=i.x,E.y=o.y,E.z=s.z;var k=ne;k.x=u.x,k.y=c.y,k.z=l.z;var q=z.Cartesian3.midpoint(E,k,ae),j=0;for(a=0;a<f;a+=3){n.x=e[a]+t[a],n.y=e[a+1]+t[a+1],n.z=e[a+2]+t[a+2];var _=z.Cartesian3.magnitude(z.Cartesian3.subtract(n,q,W));j<_&&(j=_);var S=z.Cartesian3.magnitudeSquared(z.Cartesian3.subtract(n,b,W));if(g<S){var M=Math.sqrt(S);g=(x=.5*(x+M))*x;var R=M-x;b.x=(x*b.x+R*n.x)/M,b.y=(x*b.y+R*n.y)/M,b.z=(x*b.z+R*n.z)/M}}return x<j?(z.Cartesian3.clone(b,r.center),r.radius=x):(z.Cartesian3.clone(q,r.center),r.radius=j),r},I.fromCornerPoints=function(e,t,r){Q.Check.typeOf.object("corner",e),Q.Check.typeOf.object("oppositeCorner",t),D.defined(r)||(r=new I);var n=z.Cartesian3.midpoint(e,t,r.center);return r.radius=z.Cartesian3.distance(n,t),r},I.fromEllipsoid=function(e,t){return Q.Check.typeOf.object("ellipsoid",e),D.defined(t)||(t=new I),z.Cartesian3.clone(z.Cartesian3.ZERO,t.center),t.radius=e.maximumRadius,t};var le=new z.Cartesian3;I.fromBoundingSpheres=function(e,t){if(D.defined(t)||(t=new I),!D.defined(e)||0===e.length)return t.center=z.Cartesian3.clone(z.Cartesian3.ZERO,t.center),t.radius=0,t;var r=e.length;if(1===r)return I.clone(e[0],t);if(2===r)return I.union(e[0],e[1],t);var n,a=[];for(n=0;n<r;n++)a.push(e[n].center);var i=(t=I.fromPoints(a,t)).center,o=t.radius;for(n=0;n<r;n++){var s=e[n];o=Math.max(o,z.Cartesian3.distance(i,s.center,le)+s.radius)}return t.radius=o,t};var fe=new z.Cartesian3,de=new z.Cartesian3,he=new z.Cartesian3;I.fromOrientedBoundingBox=function(e,t){Q.Check.defined("orientedBoundingBox",e),D.defined(t)||(t=new I);var r=e.halfAxes,n=X.getColumn(r,0,fe),a=X.getColumn(r,1,de),i=X.getColumn(r,2,he);return z.Cartesian3.add(n,a,n),z.Cartesian3.add(n,i,n),t.center=z.Cartesian3.clone(e.center,t.center),t.radius=z.Cartesian3.magnitude(n),t},I.clone=function(e,t){if(D.defined(e))return D.defined(t)?(t.center=z.Cartesian3.clone(e.center,t.center),t.radius=e.radius,t):new I(e.center,e.radius)},I.packedLength=4,I.pack=function(e,t,r){Q.Check.typeOf.object("value",e),Q.Check.defined("array",t),r=A.defaultValue(r,0);var n=e.center;return t[r++]=n.x,t[r++]=n.y,t[r++]=n.z,t[r]=e.radius,t},I.unpack=function(e,t,r){Q.Check.defined("array",e),t=A.defaultValue(t,0),D.defined(r)||(r=new I);var n=r.center;return n.x=e[t++],n.y=e[t++],n.z=e[t++],r.radius=e[t],r};var pe=new z.Cartesian3,ye=new z.Cartesian3;I.union=function(e,t,r){Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),D.defined(r)||(r=new I);var n=e.center,a=e.radius,i=t.center,o=t.radius,s=z.Cartesian3.subtract(i,n,pe),u=z.Cartesian3.magnitude(s);if(u+o<=a)return e.clone(r),r;if(u+a<=o)return t.clone(r),r;var c=.5*(a+u+o),l=z.Cartesian3.multiplyByScalar(s,(c-a)/u,ye);return z.Cartesian3.add(l,n,l),z.Cartesian3.clone(l,r.center),r.radius=c,r};var me=new z.Cartesian3;I.expand=function(e,t,r){Q.Check.typeOf.object("sphere",e),Q.Check.typeOf.object("point",t),r=I.clone(e,r);var n=z.Cartesian3.magnitude(z.Cartesian3.subtract(t,r.center,me));return n>r.radius&&(r.radius=n),r},I.intersectPlane=function(e,t){Q.Check.typeOf.object("sphere",e),Q.Check.typeOf.object("plane",t);var r=e.center,n=e.radius,a=t.normal,i=z.Cartesian3.dot(a,r)+t.distance;return i<-n?o.OUTSIDE:i<n?o.INTERSECTING:o.INSIDE},I.transform=function(e,t,r){return Q.Check.typeOf.object("sphere",e),Q.Check.typeOf.object("transform",t),D.defined(r)||(r=new I),r.center=K.multiplyByPoint(t,e.center,r.center),r.radius=K.getMaximumScale(t)*e.radius,r};var Ce=new z.Cartesian3;I.distanceSquaredTo=function(e,t){Q.Check.typeOf.object("sphere",e),Q.Check.typeOf.object("cartesian",t);var r=z.Cartesian3.subtract(e.center,t,Ce);return z.Cartesian3.magnitudeSquared(r)-e.radius*e.radius},I.transformWithoutScale=function(e,t,r){return Q.Check.typeOf.object("sphere",e),Q.Check.typeOf.object("transform",t),D.defined(r)||(r=new I),r.center=K.multiplyByPoint(t,e.center,r.center),r.radius=e.radius,r};var we=new z.Cartesian3;I.computePlaneDistances=function(e,t,r,n){Q.Check.typeOf.object("sphere",e),Q.Check.typeOf.object("position",t),Q.Check.typeOf.object("direction",r),D.defined(n)||(n=new s);var a=z.Cartesian3.subtract(e.center,t,we),i=z.Cartesian3.dot(r,a);return n.start=i-e.radius,n.stop=i+e.radius,n};for(var ve=new z.Cartesian3,Oe=new z.Cartesian3,be=new z.Cartesian3,ge=new z.Cartesian3,xe=new z.Cartesian3,Ee=new z.Cartographic,ke=new Array(8),qe=0;qe<8;++qe)ke[qe]=new z.Cartesian3;var je,_e=new n;I.projectTo2D=function(e,t,r){Q.Check.typeOf.object("sphere",e);var n=(t=A.defaultValue(t,_e)).ellipsoid,a=e.center,i=e.radius,o=n.geodeticSurfaceNormal(a,ve),s=z.Cartesian3.cross(z.Cartesian3.UNIT_Z,o,Oe);z.Cartesian3.normalize(s,s);var u=z.Cartesian3.cross(o,s,be);z.Cartesian3.normalize(u,u),z.Cartesian3.multiplyByScalar(o,i,o),z.Cartesian3.multiplyByScalar(u,i,u),z.Cartesian3.multiplyByScalar(s,i,s);var c=z.Cartesian3.negate(u,xe),l=z.Cartesian3.negate(s,ge),f=ke,d=f[0];z.Cartesian3.add(o,u,d),z.Cartesian3.add(d,s,d),d=f[1],z.Cartesian3.add(o,u,d),z.Cartesian3.add(d,l,d),d=f[2],z.Cartesian3.add(o,c,d),z.Cartesian3.add(d,l,d),d=f[3],z.Cartesian3.add(o,c,d),z.Cartesian3.add(d,s,d),z.Cartesian3.negate(o,o),d=f[4],z.Cartesian3.add(o,u,d),z.Cartesian3.add(d,s,d),d=f[5],z.Cartesian3.add(o,u,d),z.Cartesian3.add(d,l,d),d=f[6],z.Cartesian3.add(o,c,d),z.Cartesian3.add(d,l,d),d=f[7],z.Cartesian3.add(o,c,d),z.Cartesian3.add(d,s,d);for(var h=f.length,p=0;p<h;++p){var y=f[p];z.Cartesian3.add(a,y,y);var m=n.cartesianToCartographic(y,Ee);t.project(m,y)}var C=(a=(r=I.fromPoints(f,r)).center).x,w=a.y,v=a.z;return a.x=v,a.y=C,a.z=w,r},I.isOccluded=function(e,t){return Q.Check.typeOf.object("sphere",e),Q.Check.typeOf.object("occluder",t),!t.isBoundingSphereVisible(e)},I.equals=function(e,t){return e===t||D.defined(e)&&D.defined(t)&&z.Cartesian3.equals(e.center,t.center)&&e.radius===t.radius},I.prototype.intersectPlane=function(e){return I.intersectPlane(this,e)},I.prototype.distanceSquaredTo=function(e){return I.distanceSquaredTo(this,e)},I.prototype.computePlaneDistances=function(e,t,r){return I.computePlaneDistances(this,e,t,r)},I.prototype.isOccluded=function(e){return I.isOccluded(this,e)},I.prototype.equals=function(e){return I.equals(this,e)},I.prototype.clone=function(e){return I.clone(this,e)},I.prototype.volume=function(){var e=this.radius;return R*e*e*e};var Se,Me,Re,Te,De,Ae,ze,Ie,Pe,Ne,Ue,Fe,Ve,Le,Be,We,Ye,He={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Ze={};function Je(e){for(var t=e.split("."),r=0,n=t.length;r<n;++r)t[r]=parseInt(t[r],10);return t}function Xe(){if(!D.defined(Me)&&(Me=!1,!$e())){var e=/ Chrome\/([\.0-9]+)/.exec(Se.userAgent);null!==e&&(Me=!0,Re=Je(e[1]))}return Me}function Ge(){if(!D.defined(Te)&&(Te=!1,!Xe()&&!$e()&&/ Safari\/[\.0-9]+/.test(Se.userAgent))){var e=/ Version\/([\.0-9]+)/.exec(Se.userAgent);null!==e&&(Te=!0,De=Je(e[1]))}return Te}function Qe(){if(!D.defined(Ae)){Ae=!1;var e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(Se.userAgent);null!==e&&(Ae=!0,(ze=Je(e[1])).isNightly=!!e[2])}return Ae}function Ke(){var e;D.defined(Ie)||(Ie=!1,"Microsoft Internet Explorer"===Se.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Se.userAgent))&&(Ie=!0,Pe=Je(e[1])):"Netscape"===Se.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Se.userAgent))&&(Ie=!0,Pe=Je(e[1])));return Ie}function $e(){if(!D.defined(Ne)){Ne=!1;var e=/ Edge\/([\.0-9]+)/.exec(Se.userAgent);null!==e&&(Ne=!0,Ue=Je(e[1]))}return Ne}function et(){if(!D.defined(Fe)){Fe=!1;var e=/Firefox\/([\.0-9]+)/.exec(Se.userAgent);null!==e&&(Fe=!0,Ve=Je(e[1]))}return Fe}function tt(){if(!D.defined(Ye)){var e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");var t=e.style.imageRendering;(Ye=D.defined(t)&&""!==t)&&(We=t)}return Ye}function rt(){if(!rt.initialized)throw new Q.DeveloperError("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return rt._result}r.defineProperties(Ze,{element:{get:function(){if(Ze.supportsFullscreen())return document[He.fullscreenElement]}},changeEventName:{get:function(){if(Ze.supportsFullscreen())return He.fullscreenchange}},errorEventName:{get:function(){if(Ze.supportsFullscreen())return He.fullscreenerror}},enabled:{get:function(){if(Ze.supportsFullscreen())return document[He.fullscreenEnabled]}},fullscreen:{get:function(){if(Ze.supportsFullscreen())return null!==Ze.element}}}),Ze.supportsFullscreen=function(){if(D.defined(je))return je;je=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return He.requestFullscreen="requestFullscreen",He.exitFullscreen="exitFullscreen",He.fullscreenEnabled="fullscreenEnabled",He.fullscreenElement="fullscreenElement",He.fullscreenchange="fullscreenchange",He.fullscreenerror="fullscreenerror",je=!0;for(var t,r=["webkit","moz","o","ms","khtml"],n=0,a=r.length;n<a;++n){var i=r[n];"function"==typeof e[t=i+"RequestFullscreen"]?(He.requestFullscreen=t,je=!0):"function"==typeof e[t=i+"RequestFullScreen"]&&(He.requestFullscreen=t,je=!0),t=i+"ExitFullscreen","function"==typeof document[t]?He.exitFullscreen=t:(t=i+"CancelFullScreen","function"==typeof document[t]&&(He.exitFullscreen=t)),t=i+"FullscreenEnabled",void 0!==document[t]?He.fullscreenEnabled=t:(t=i+"FullScreenEnabled",void 0!==document[t]&&(He.fullscreenEnabled=t)),t=i+"FullscreenElement",void 0!==document[t]?He.fullscreenElement=t:(t=i+"FullScreenElement",void 0!==document[t]&&(He.fullscreenElement=t)),t=i+"fullscreenchange",void 0!==document["on"+t]&&("ms"===i&&(t="MSFullscreenChange"),He.fullscreenchange=t),t=i+"fullscreenerror",void 0!==document["on"+t]&&("ms"===i&&(t="MSFullscreenError"),He.fullscreenerror=t)}return je},Ze.requestFullscreen=function(e,t){Ze.supportsFullscreen()&&e[He.requestFullscreen]({vrDisplay:t})},Ze.exitFullscreen=function(){Ze.supportsFullscreen()&&document[He.exitFullscreen]()},Ze._names=He,Se="undefined"!=typeof navigator?navigator:{},rt._promise=void 0,rt._result=void 0,rt.initialize=function(){if(D.defined(rt._promise))return rt._promise;var e=d.when.defer();if(rt._promise=e.promise,$e())return rt._result=!1,e.resolve(rt._result),e.promise;var t=new Image;return t.onload=function(){rt._result=0<t.width&&0<t.height,e.resolve(rt._result)},t.onerror=function(){rt._result=!1,e.resolve(rt._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},r.defineProperties(rt,{initialized:{get:function(){return D.defined(rt._result)}}});var nt=[];"undefined"!=typeof ArrayBuffer&&(nt.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&nt.push(Uint8ClampedArray),"undefined"!=typeof CanvasPixelArray&&nt.push(CanvasPixelArray));var at={isChrome:Xe,chromeVersion:function(){return Xe()&&Re},isSafari:Ge,safariVersion:function(){return Ge()&&De},isWebkit:Qe,webkitVersion:function(){return Qe()&&ze},isInternetExplorer:Ke,internetExplorerVersion:function(){return Ke()&&Pe},isEdge:$e,edgeVersion:function(){return $e()&&Ue},isFirefox:et,firefoxVersion:function(){return et()&&Ve},isWindows:function(){return D.defined(Le)||(Le=/Windows/i.test(Se.appVersion)),Le},hardwareConcurrency:A.defaultValue(Se.hardwareConcurrency,3),supportsPointerEvents:function(){return D.defined(Be)||(Be=!et()&&"undefined"!=typeof PointerEvent&&(!D.defined(Se.pointerEnabled)||Se.pointerEnabled)),Be},supportsImageRenderingPixelated:tt,supportsWebP:rt,imageRenderingValue:function(){return tt()?We:void 0},typedArrayTypes:nt};function it(e,t,r,n){this.x=A.defaultValue(e,0),this.y=A.defaultValue(t,0),this.z=A.defaultValue(r,0),this.w=A.defaultValue(n,0)}at.supportsFullscreen=function(){return Ze.supportsFullscreen()},at.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},at.supportsWebWorkers=function(){return"undefined"!=typeof Worker},at.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!at.isEdge()};var ot=new z.Cartesian3;it.fromAxisAngle=function(e,t,r){Q.Check.typeOf.object("axis",e),Q.Check.typeOf.number("angle",t);var n=t/2,a=Math.sin(n),i=(ot=z.Cartesian3.normalize(e,ot)).x*a,o=ot.y*a,s=ot.z*a,u=Math.cos(n);return D.defined(r)?(r.x=i,r.y=o,r.z=s,r.w=u,r):new it(i,o,s,u)};var st=[1,2,0],ut=new Array(3);it.fromRotationMatrix=function(e,t){var r,n,a,i,o;Q.Check.typeOf.object("matrix",e);var s=e[X.COLUMN0ROW0],u=e[X.COLUMN1ROW1],c=e[X.COLUMN2ROW2],l=s+u+c;if(0<l)o=.5*(r=Math.sqrt(l+1)),r=.5/r,n=(e[X.COLUMN1ROW2]-e[X.COLUMN2ROW1])*r,a=(e[X.COLUMN2ROW0]-e[X.COLUMN0ROW2])*r,i=(e[X.COLUMN0ROW1]-e[X.COLUMN1ROW0])*r;else{var f=0;s<u&&(f=1),s<c&&u<c&&(f=2);var d=st[f],h=st[d];r=Math.sqrt(e[X.getElementIndex(f,f)]-e[X.getElementIndex(d,d)]-e[X.getElementIndex(h,h)]+1);var p=ut;p[f]=.5*r,r=.5/r,o=(e[X.getElementIndex(h,d)]-e[X.getElementIndex(d,h)])*r,p[d]=(e[X.getElementIndex(d,f)]+e[X.getElementIndex(f,d)])*r,p[h]=(e[X.getElementIndex(h,f)]+e[X.getElementIndex(f,h)])*r,n=-p[0],a=-p[1],i=-p[2]}return D.defined(t)?(t.x=n,t.y=a,t.z=i,t.w=o,t):new it(n,a,i,o)};var ct=new it,lt=new it,ft=new it,dt=new it;it.fromHeadingPitchRoll=function(e,t){return Q.Check.typeOf.object("headingPitchRoll",e),dt=it.fromAxisAngle(z.Cartesian3.UNIT_X,e.roll,ct),ft=it.fromAxisAngle(z.Cartesian3.UNIT_Y,-e.pitch,t),t=it.multiply(ft,dt,ft),lt=it.fromAxisAngle(z.Cartesian3.UNIT_Z,-e.heading,ct),it.multiply(lt,t,t)};var ht=new z.Cartesian3,pt=new z.Cartesian3,yt=new it,mt=new it,Ct=new it;it.packedLength=4,it.pack=function(e,t,r){return Q.Check.typeOf.object("value",e),Q.Check.defined("array",t),r=A.defaultValue(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},it.unpack=function(e,t,r){return Q.Check.defined("array",e),t=A.defaultValue(t,0),D.defined(r)||(r=new it),r.x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3],r},it.packedInterpolationLength=3,it.convertPackedArrayForInterpolation=function(e,t,r,n){it.unpack(e,4*r,Ct),it.conjugate(Ct,Ct);for(var a=0,i=r-t+1;a<i;a++){var o=3*a;it.unpack(e,4*(t+a),yt),it.multiply(yt,Ct,yt),yt.w<0&&it.negate(yt,yt),it.computeAxis(yt,ht);var s=it.computeAngle(yt);n[o]=ht.x*s,n[1+o]=ht.y*s,n[2+o]=ht.z*s}},it.unpackInterpolationResult=function(e,t,r,n,a){D.defined(a)||(a=new it),z.Cartesian3.fromArray(e,0,pt);var i=z.Cartesian3.magnitude(pt);return it.unpack(t,4*n,mt),0===i?it.clone(it.IDENTITY,yt):it.fromAxisAngle(pt,i,yt),it.multiply(yt,mt,a)},it.clone=function(e,t){if(D.defined(e))return D.defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new it(e.x,e.y,e.z,e.w)},it.conjugate=function(e,t){return Q.Check.typeOf.object("quaternion",e),Q.Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},it.magnitudeSquared=function(e){return Q.Check.typeOf.object("quaternion",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},it.magnitude=function(e){return Math.sqrt(it.magnitudeSquared(e))},it.normalize=function(e,t){Q.Check.typeOf.object("result",t);var r=1/it.magnitude(e),n=e.x*r,a=e.y*r,i=e.z*r,o=e.w*r;return t.x=n,t.y=a,t.z=i,t.w=o,t},it.inverse=function(e,t){Q.Check.typeOf.object("result",t);var r=it.magnitudeSquared(e);return t=it.conjugate(e,t),it.multiplyByScalar(t,1/r,t)},it.add=function(e,t,r){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},it.subtract=function(e,t,r){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},it.negate=function(e,t){return Q.Check.typeOf.object("quaternion",e),Q.Check.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},it.dot=function(e,t){return Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},it.multiply=function(e,t,r){Q.Check.typeOf.object("left",e),Q.Check.typeOf.object("right",t),Q.Check.typeOf.object("result",r);var n=e.x,a=e.y,i=e.z,o=e.w,s=t.x,u=t.y,c=t.z,l=t.w,f=o*s+n*l+a*c-i*u,d=o*u-n*c+a*l+i*s,h=o*c+n*u-a*s+i*l,p=o*l-n*s-a*u-i*c;return r.x=f,r.y=d,r.z=h,r.w=p,r},it.multiplyByScalar=function(e,t,r){return Q.Check.typeOf.object("quaternion",e),Q.Check.typeOf.number("scalar",t),Q.Check.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},it.divideByScalar=function(e,t,r){return Q.Check.typeOf.object("quaternion",e),Q.Check.typeOf.number("scalar",t),Q.Check.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},it.computeAxis=function(e,t){Q.Check.typeOf.object("quaternion",e),Q.Check.typeOf.object("result",t);var r=e.w;if(Math.abs(r-1)<Z.CesiumMath.EPSILON6)return t.x=t.y=t.z=0,t;var n=1/Math.sqrt(1-r*r);return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},it.computeAngle=function(e){return Q.Check.typeOf.object("quaternion",e),Math.abs(e.w-1)<Z.CesiumMath.EPSILON6?0:2*Math.acos(e.w)};var wt=new it;it.lerp=function(e,t,r,n){return Q.Check.typeOf.object("start",e),Q.Check.typeOf.object("end",t),Q.Check.typeOf.number("t",r),Q.Check.typeOf.object("result",n),wt=it.multiplyByScalar(t,r,wt),n=it.multiplyByScalar(e,1-r,n),it.add(wt,n,n)};var vt=new it,Ot=new it,bt=new it;it.slerp=function(e,t,r,n){Q.Check.typeOf.object("start",e),Q.Check.typeOf.object("end",t),Q.Check.typeOf.number("t",r),Q.Check.typeOf.object("result",n);var a=it.dot(e,t),i=t;if(a<0&&(a=-a,i=vt=it.negate(t,vt)),1-a<Z.CesiumMath.EPSILON6)return it.lerp(e,i,r,n);var o=Math.acos(a);return Ot=it.multiplyByScalar(e,Math.sin((1-r)*o),Ot),bt=it.multiplyByScalar(i,Math.sin(r*o),bt),n=it.add(Ot,bt,n),it.multiplyByScalar(n,1/Math.sin(o),n)},it.log=function(e,t){Q.Check.typeOf.object("quaternion",e),Q.Check.typeOf.object("result",t);var r=Z.CesiumMath.acosClamped(e.w),n=0;return 0!==r&&(n=r/Math.sin(r)),z.Cartesian3.multiplyByScalar(e,n,t)},it.exp=function(e,t){Q.Check.typeOf.object("cartesian",e),Q.Check.typeOf.object("result",t);var r=z.Cartesian3.magnitude(e),n=0;return 0!==r&&(n=Math.sin(r)/r),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=Math.cos(r),t};var gt=new z.Cartesian3,xt=new z.Cartesian3,Et=new it,kt=new it;it.computeInnerQuadrangle=function(e,t,r,n){Q.Check.typeOf.object("q0",e),Q.Check.typeOf.object("q1",t),Q.Check.typeOf.object("q2",r),Q.Check.typeOf.object("result",n);var a=it.conjugate(t,Et);it.multiply(a,r,kt);var i=it.log(kt,gt);it.multiply(a,e,kt);var o=it.log(kt,xt);return z.Cartesian3.add(i,o,i),z.Cartesian3.multiplyByScalar(i,.25,i),z.Cartesian3.negate(i,i),it.exp(i,Et),it.multiply(t,Et,n)},it.squad=function(e,t,r,n,a,i){Q.Check.typeOf.object("q0",e),Q.Check.typeOf.object("q1",t),Q.Check.typeOf.object("s0",r),Q.Check.typeOf.object("s1",n),Q.Check.typeOf.number("t",a),Q.Check.typeOf.object("result",i);var o=it.slerp(e,t,a,Et),s=it.slerp(r,n,a,kt);return it.slerp(o,s,2*a*(1-a),i)};for(var qt=new it,jt=1.9011074535173003,_t=at.supportsTypedArrays()?new Float32Array(8):[],St=at.supportsTypedArrays()?new Float32Array(8):[],Mt=at.supportsTypedArrays()?new Float32Array(8):[],Rt=at.supportsTypedArrays()?new Float32Array(8):[],Tt=0;Tt<7;++Tt){var Dt=Tt+1,At=2*Dt+1;_t[Tt]=1/(Dt*At),St[Tt]=Dt/At}function zt(e,t,r){Q.Check.defined("array",e),Q.Check.defined("itemToFind",t),Q.Check.defined("comparator",r);for(var n,a,i=0,o=e.length-1;i<=o;)if((a=r(e[n=~~((i+o)/2)],t))<0)i=1+n;else{if(!(0<a))return n;o=n-1}return~(o+1)}function It(e,t,r,n,a){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=a}function Pt(){function v(e,t,r,n){r=r||" ";var a=e.length>=t?"":Array(1+t-e.length>>>0).join(r);return n?e+a:a+e}function O(e,t,r,n,a,i){var o=n-e.length;return 0<o&&(e=r||!a?v(e,n,i,r):e.slice(0,t.length)+v("",o,"0",!0)+e.slice(t.length)),e}function b(e,t,r,n,a,i,o){var s=e>>>0;return e=(r=r&&s&&{2:"0b",8:"0",16:"0x"}[t]||"")+v(s.toString(t),i||0,"0",!1),O(e,r,n,a,o)}function g(e,t,r,n,a,i){return null!=n&&(e=e.slice(0,n)),O(e,"",t,r,a,i)}var x=arguments,E=0,e=x[E++];return e.replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,t,r,n,a,i,o){var s,u,c,l,f;if("%%"==e)return"%";for(var d=!1,h="",p=!1,y=!1,m=" ",C=r.length,w=0;r&&w<C;w++)switch(r.charAt(w)){case" ":h=" ";break;case"+":h="+";break;case"-":d=!0;break;case"'":m=r.charAt(w+1);break;case"0":p=!0;break;case"#":y=!0}if((n=n?"*"==n?+x[E++]:"*"==n.charAt(0)?+x[n.slice(1,-1)]:+n:0)<0&&(n=-n,d=!0),!isFinite(n))throw new Error("sprintf: (minimum-)width must be finite");switch(i=i?"*"==i?+x[E++]:"*"==i.charAt(0)?+x[i.slice(1,-1)]:+i:-1<"fFeE".indexOf(o)?6:"d"==o?0:void 0,f=t?x[t.slice(0,-1)]:x[E++],o){case"s":return g(String(f),d,n,i,p,m);case"c":return g(String.fromCharCode(+f),d,n,i,p);case"b":return b(f,2,y,d,n,i,p);case"o":return b(f,8,y,d,n,i,p);case"x":return b(f,16,y,d,n,i,p);case"X":return b(f,16,y,d,n,i,p).toUpperCase();case"u":return b(f,10,y,d,n,i,p);case"i":case"d":return s=+f||0,f=(u=(s=Math.round(s-s%1))<0?"-":h)+v(String(Math.abs(s)),i,"0",!1),O(f,u,d,n,p);case"e":case"E":case"f":case"F":case"g":case"G":return u=(s=+f)<0?"-":h,c=["toExponential","toFixed","toPrecision"]["efg".indexOf(o.toLowerCase())],l=["toString","toUpperCase"]["eEfFgG".indexOf(o)%2],f=u+Math.abs(s)[c](i),O(f,u,d,n,p)[l]();default:return e}})}function Nt(e,t,r,n,a,i,o,s){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=a,this.second=i,this.millisecond=o,this.isLeapSecond=s}function Ut(e){if(null===e||isNaN(e))throw new Q.DeveloperError("year is required and must be a number.");return e%4==0&&e%100!=0||e%400==0}function Ft(e,t){this.julianDate=e,this.offset=t}_t[7]=jt/136,St[7]=8*jt/17,it.fastSlerp=function(e,t,r,n){Q.Check.typeOf.object("start",e),Q.Check.typeOf.object("end",t),Q.Check.typeOf.number("t",r),Q.Check.typeOf.object("result",n);var a,i=it.dot(e,t);0<=i?a=1:(a=-1,i=-i);for(var o=i-1,s=1-r,u=r*r,c=s*s,l=7;0<=l;--l)Mt[l]=(_t[l]*u-St[l])*o,Rt[l]=(_t[l]*c-St[l])*o;var f=a*r*(1+Mt[0]*(1+Mt[1]*(1+Mt[2]*(1+Mt[3]*(1+Mt[4]*(1+Mt[5]*(1+Mt[6]*(1+Mt[7])))))))),d=s*(1+Rt[0]*(1+Rt[1]*(1+Rt[2]*(1+Rt[3]*(1+Rt[4]*(1+Rt[5]*(1+Rt[6]*(1+Rt[7])))))))),h=it.multiplyByScalar(e,d,qt);return it.multiplyByScalar(t,f,n),it.add(h,n,n)},it.fastSquad=function(e,t,r,n,a,i){Q.Check.typeOf.object("q0",e),Q.Check.typeOf.object("q1",t),Q.Check.typeOf.object("s0",r),Q.Check.typeOf.object("s1",n),Q.Check.typeOf.number("t",a),Q.Check.typeOf.object("result",i);var o=it.fastSlerp(e,t,a,Et),s=it.fastSlerp(r,n,a,kt);return it.fastSlerp(o,s,2*a*(1-a),i)},it.equals=function(e,t){return e===t||D.defined(e)&&D.defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},it.equalsEpsilon=function(e,t,r){return Q.Check.typeOf.number("epsilon",r),e===t||D.defined(e)&&D.defined(t)&&Math.abs(e.x-t.x)<=r&&Math.abs(e.y-t.y)<=r&&Math.abs(e.z-t.z)<=r&&Math.abs(e.w-t.w)<=r},it.ZERO=t.freezeObject(new it(0,0,0,0)),it.IDENTITY=t.freezeObject(new it(0,0,0,1)),it.prototype.clone=function(e){return it.clone(this,e)},it.prototype.equals=function(e){return it.equals(this,e)},it.prototype.equalsEpsilon=function(e,t){return it.equalsEpsilon(this,e,t)},it.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var Vt=t.freezeObject({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Lt=t.freezeObject({UTC:0,TAI:1}),Bt=new Nt,Wt=[31,28,31,30,31,30,31,31,30,31,30,31];function Yt(e,t){return sr.compare(e.julianDate,t.julianDate)}var Ht=new Ft;function Zt(e){Ht.julianDate=e;var t=sr.leapSeconds,r=zt(t,Ht,Yt);r<0&&(r=~r),r>=t.length&&(r=t.length-1);var n=t[r].offset;0<r&&n<sr.secondsDifference(t[r].julianDate,e)&&(n=t[--r].offset);sr.addSeconds(e,n,e)}function Jt(e,t){Ht.julianDate=e;var r=sr.leapSeconds,n=zt(r,Ht,Yt);if(n<0&&(n=~n),0===n)return sr.addSeconds(e,-r[0].offset,t);if(n>=r.length)return sr.addSeconds(e,-r[n-1].offset,t);var a=sr.secondsDifference(r[n].julianDate,e);return 0===a?sr.addSeconds(e,-r[n].offset,t):a<=1?void 0:sr.addSeconds(e,-r[--n].offset,t)}function Xt(e,t,r){var n=t/Vt.SECONDS_PER_DAY|0;return e+=n,(t-=Vt.SECONDS_PER_DAY*n)<0&&(e--,t+=Vt.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function Gt(e,t,r,n,a,i,o){var s=(t-14)/12|0,u=e+4800+s,c=(1461*u/4|0)+(367*(t-2-12*s)/12|0)-(3*((u+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);var l=i+(n*Vt.SECONDS_PER_HOUR+a*Vt.SECONDS_PER_MINUTE+o*Vt.SECONDS_PER_MILLISECOND);return 43200<=l&&--c,[c,l]}var Qt=/^(\d{4})$/,Kt=/^(\d{4})-(\d{2})$/,$t=/^(\d{4})-?(\d{3})$/,er=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,tr=/^(\d{4})-?(\d{2})-?(\d{2})$/,rr=/([Z+\-])?(\d{2})?:?(\d{2})?$/,nr=/^(\d{2})(\.\d+)?/.source+rr.source,ar=/^(\d{2}):?(\d{2})(\.\d+)?/.source+rr.source,ir=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+rr.source,or="Invalid ISO 8601 date.";function sr(e,t,r){this.dayNumber=void 0,this.secondsOfDay=void 0,e=A.defaultValue(e,0),t=A.defaultValue(t,0),r=A.defaultValue(r,Lt.UTC);var n=0|e;Xt(n,t+=(e-n)*Vt.SECONDS_PER_DAY,this),r===Lt.UTC&&Zt(this)}sr.fromGregorianDate=function(e,t){if(!(e instanceof Nt))throw new Q.DeveloperError("date must be a valid GregorianDate.");var r=Gt(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return D.defined(t)?(Xt(r[0],r[1],t),Zt(t),t):new sr(r[0],r[1],Lt.UTC)},sr.fromDate=function(e,t){if(!(e instanceof Date)||isNaN(e.getTime()))throw new Q.DeveloperError("date must be a valid JavaScript Date.");var r=Gt(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return D.defined(t)?(Xt(r[0],r[1],t),Zt(t),t):new sr(r[0],r[1],Lt.UTC)},sr.fromIso8601=function(e,t){if("string"!=typeof e)throw new Q.DeveloperError(or);var r,n,a,i,o,s=(e=e.replace(",",".")).split("T"),u=1,c=1,l=0,f=0,d=0,h=0,p=s[0],y=s[1];if(!D.defined(p))throw new Q.DeveloperError(or);if(null!==(s=p.match(tr))){if(0<(i=p.split("-").length-1)&&2!==i)throw new Q.DeveloperError(or);r=+s[1],u=+s[2],c=+s[3]}else if(null!==(s=p.match(Kt)))r=+s[1],u=+s[2];else if(null!==(s=p.match(Qt)))r=+s[1];else{var m;if(null!==(s=p.match($t))){if(r=+s[1],m=+s[2],a=Ut(r),m<1||a&&366<m||!a&&365<m)throw new Q.DeveloperError(or)}else{if(null===(s=p.match(er)))throw new Q.DeveloperError(or);r=+s[1];var C=+s[2],w=+s[3]||0;if(0<(i=p.split("-").length-1)&&(!D.defined(s[3])&&1!==i||D.defined(s[3])&&2!==i))throw new Q.DeveloperError(or);m=7*C+w-new Date(Date.UTC(r,0,4)).getUTCDay()-3}(n=new Date(Date.UTC(r,0,1))).setUTCDate(m),u=n.getUTCMonth()+1,c=n.getUTCDate()}if(a=Ut(r),u<1||12<u||c<1||(2!==u||!a)&&Wt[u-1]<c||a&&2===u&&29<c)throw new Q.DeveloperError(or);if(D.defined(y)){if(null!==(s=y.match(ir))){if(0<(i=y.split(":").length-1)&&2!==i&&3!==i)throw new Q.DeveloperError(or);l=+s[1],f=+s[2],d=+s[3],h=1e3*(s[4]||0),o=5}else if(null!==(s=y.match(ar))){if(2<(i=y.split(":").length-1))throw new Q.DeveloperError(or);l=+s[1],f=+s[2],d=60*(s[3]||0),o=4}else{if(null===(s=y.match(nr)))throw new Q.DeveloperError(or);l=+s[1],f=60*(s[2]||0),o=3}if(60<=f||61<=d||24<l||24===l&&(0<f||0<d||0<h))throw new Q.DeveloperError(or);var v=s[o],O=+s[o+1],b=+(s[o+2]||0);switch(v){case"+":l-=O,f-=b;break;case"-":l+=O,f+=b;break;case"Z":break;default:f+=new Date(Date.UTC(r,u-1,c,l,f)).getTimezoneOffset()}}var g=60===d;for(g&&d--;60<=f;)f-=60,l++;for(;24<=l;)l-=24,c++;for(n=a&&2===u?29:Wt[u-1];n<c;)c-=n,12<++u&&(u-=12,r++),n=a&&2===u?29:Wt[u-1];for(;f<0;)f+=60,l--;for(;l<0;)l+=24,c--;for(;c<1;)--u<1&&(u+=12,r--),c+=n=a&&2===u?29:Wt[u-1];var x=Gt(r,u,c,l,f,d,h);return D.defined(t)?(Xt(x[0],x[1],t),Zt(t)):t=new sr(x[0],x[1],Lt.UTC),g&&sr.addSeconds(t,1,t),t},sr.now=function(e){return sr.fromDate(new Date,e)};var ur=new sr(0,0,Lt.TAI);function cr(e){if(e instanceof cr)this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment;else if(e){var t=lr.exec(e);this.scheme=t[1],this.authority=t[2],this.path=t[3],this.query=t[4],this.fragment=t[5]}}sr.toGregorianDate=function(e,t){if(!D.defined(e))throw new Q.DeveloperError("julianDate is required.");var r=!1,n=Jt(e,ur);D.defined(n)||(sr.addSeconds(e,-1,ur),n=Jt(ur,ur),r=!0);var a=n.dayNumber,i=n.secondsOfDay;43200<=i&&(a+=1);var o=a+68569|0,s=4*o/146097|0,u=4e3*((o=o-((146097*s+3)/4|0)|0)+1)/1461001|0,c=80*(o=o-(1461*u/4|0)+31|0)/2447|0,l=o-(2447*c/80|0)|0,f=2+c-12*(o=c/11|0)|0,d=100*(s-49)+u+o|0,h=i/Vt.SECONDS_PER_HOUR|0,p=i-h*Vt.SECONDS_PER_HOUR,y=p/Vt.SECONDS_PER_MINUTE|0,m=0|(p-=y*Vt.SECONDS_PER_MINUTE),C=(p-m)/Vt.SECONDS_PER_MILLISECOND;return 23<(h+=12)&&(h-=24),r&&(m+=1),D.defined(t)?(t.year=d,t.month=f,t.day=l,t.hour=h,t.minute=y,t.second=m,t.millisecond=C,t.isLeapSecond=r,t):new Nt(d,f,l,h,y,m,C,r)},sr.toDate=function(e){if(!D.defined(e))throw new Q.DeveloperError("julianDate is required.");var t=sr.toGregorianDate(e,Bt),r=t.second;return t.isLeapSecond&&--r,new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,r,t.millisecond))},sr.toIso8601=function(e,t){if(!D.defined(e))throw new Q.DeveloperError("julianDate is required.");var r=sr.toGregorianDate(e,Bt),n=r.year,a=r.month,i=r.day,o=r.hour,s=r.minute,u=r.second,c=r.millisecond;return 1e4===n&&1===a&&1===i&&0===o&&0===s&&0===u&&0===c&&(n=9999,a=12,i=31,o=24),D.defined(t)||0===c?D.defined(t)&&0!==t?Pt("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,a,i,o,s,u,(.01*c).toFixed(t).replace(".","").slice(0,t)):Pt("%04d-%02d-%02dT%02d:%02d:%02dZ",n,a,i,o,s,u):Pt("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,a,i,o,s,u,(.01*c).toString().replace(".",""))},sr.clone=function(e,t){if(D.defined(e))return D.defined(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new sr(e.dayNumber,e.secondsOfDay,Lt.TAI)},sr.compare=function(e,t){if(!D.defined(e))throw new Q.DeveloperError("left is required.");if(!D.defined(t))throw new Q.DeveloperError("right is required.");var r=e.dayNumber-t.dayNumber;return 0!=r?r:e.secondsOfDay-t.secondsOfDay},sr.equals=function(e,t){return e===t||D.defined(e)&&D.defined(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},sr.equalsEpsilon=function(e,t,r){if(!D.defined(r))throw new Q.DeveloperError("epsilon is required.");return e===t||D.defined(e)&&D.defined(t)&&Math.abs(sr.secondsDifference(e,t))<=r},sr.totalDays=function(e){if(!D.defined(e))throw new Q.DeveloperError("julianDate is required.");return e.dayNumber+e.secondsOfDay/Vt.SECONDS_PER_DAY},sr.secondsDifference=function(e,t){if(!D.defined(e))throw new Q.DeveloperError("left is required.");if(!D.defined(t))throw new Q.DeveloperError("right is required.");return(e.dayNumber-t.dayNumber)*Vt.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},sr.daysDifference=function(e,t){if(!D.defined(e))throw new Q.DeveloperError("left is required.");if(!D.defined(t))throw new Q.DeveloperError("right is required.");return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/Vt.SECONDS_PER_DAY},sr.computeTaiMinusUtc=function(e){Ht.julianDate=e;var t=sr.leapSeconds,r=zt(t,Ht,Yt);return r<0&&(r=~r,--r<0&&(r=0)),t[r].offset},sr.addSeconds=function(e,t,r){if(!D.defined(e))throw new Q.DeveloperError("julianDate is required.");if(!D.defined(t))throw new Q.DeveloperError("seconds is required.");if(!D.defined(r))throw new Q.DeveloperError("result is required.");return Xt(e.dayNumber,e.secondsOfDay+t,r)},sr.addMinutes=function(e,t,r){if(!D.defined(e))throw new Q.DeveloperError("julianDate is required.");if(!D.defined(t))throw new Q.DeveloperError("minutes is required.");if(!D.defined(r))throw new Q.DeveloperError("result is required.");var n=e.secondsOfDay+t*Vt.SECONDS_PER_MINUTE;return Xt(e.dayNumber,n,r)},sr.addHours=function(e,t,r){if(!D.defined(e))throw new Q.DeveloperError("julianDate is required.");if(!D.defined(t))throw new Q.DeveloperError("hours is required.");if(!D.defined(r))throw new Q.DeveloperError("result is required.");var n=e.secondsOfDay+t*Vt.SECONDS_PER_HOUR;return Xt(e.dayNumber,n,r)},sr.addDays=function(e,t,r){if(!D.defined(e))throw new Q.DeveloperError("julianDate is required.");if(!D.defined(t))throw new Q.DeveloperError("days is required.");if(!D.defined(r))throw new Q.DeveloperError("result is required.");return Xt(e.dayNumber+t,e.secondsOfDay,r)},sr.lessThan=function(e,t){return sr.compare(e,t)<0},sr.lessThanOrEquals=function(e,t){return sr.compare(e,t)<=0},sr.greaterThan=function(e,t){return 0<sr.compare(e,t)},sr.greaterThanOrEquals=function(e,t){return 0<=sr.compare(e,t)},sr.prototype.clone=function(e){return sr.clone(this,e)},sr.prototype.equals=function(e){return sr.equals(this,e)},sr.prototype.equalsEpsilon=function(e,t){return sr.equalsEpsilon(this,e,t)},sr.prototype.toString=function(){return sr.toIso8601(this)},sr.leapSeconds=[new Ft(new sr(2441317,43210,Lt.TAI),10),new Ft(new sr(2441499,43211,Lt.TAI),11),new Ft(new sr(2441683,43212,Lt.TAI),12),new Ft(new sr(2442048,43213,Lt.TAI),13),new Ft(new sr(2442413,43214,Lt.TAI),14),new Ft(new sr(2442778,43215,Lt.TAI),15),new Ft(new sr(2443144,43216,Lt.TAI),16),new Ft(new sr(2443509,43217,Lt.TAI),17),new Ft(new sr(2443874,43218,Lt.TAI),18),new Ft(new sr(2444239,43219,Lt.TAI),19),new Ft(new sr(2444786,43220,Lt.TAI),20),new Ft(new sr(2445151,43221,Lt.TAI),21),new Ft(new sr(2445516,43222,Lt.TAI),22),new Ft(new sr(2446247,43223,Lt.TAI),23),new Ft(new sr(2447161,43224,Lt.TAI),24),new Ft(new sr(2447892,43225,Lt.TAI),25),new Ft(new sr(2448257,43226,Lt.TAI),26),new Ft(new sr(2448804,43227,Lt.TAI),27),new Ft(new sr(2449169,43228,Lt.TAI),28),new Ft(new sr(2449534,43229,Lt.TAI),29),new Ft(new sr(2450083,43230,Lt.TAI),30),new Ft(new sr(2450630,43231,Lt.TAI),31),new Ft(new sr(2451179,43232,Lt.TAI),32),new Ft(new sr(2453736,43233,Lt.TAI),33),new Ft(new sr(2454832,43234,Lt.TAI),34),new Ft(new sr(2456109,43235,Lt.TAI),35),new Ft(new sr(2457204,43236,Lt.TAI),36),new Ft(new sr(2457754,43237,Lt.TAI),37)],cr.prototype.scheme=null,cr.prototype.authority=null,cr.prototype.path="",cr.prototype.query=null,cr.prototype.fragment=null;var lr=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");cr.prototype.getScheme=function(){return this.scheme},cr.prototype.getAuthority=function(){return this.authority},cr.prototype.getPath=function(){return this.path},cr.prototype.getQuery=function(){return this.query},cr.prototype.getFragment=function(){return this.fragment},cr.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},cr.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},cr.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},cr.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(hr,yr).replace(fr,pr)),this.path&&(this.path=this.path.replace(fr,pr)),this.query&&(this.query=this.query.replace(fr,pr)),this.fragment&&(this.fragment=this.fragment.replace(fr,pr))};var fr=/%[0-9a-z]{2}/gi,dr=/[a-zA-Z0-9\-\._~]/,hr=/(.*@)?([^@:]*)(:.*)?/;function pr(e){var t=unescape(e);return dr.test(t)?t:e.toUpperCase()}function yr(e,t,r,n){return(t||"")+r.toLowerCase()+(n||"")}function mr(e,t){if(null===e||"object"!=typeof e)return e;t=A.defaultValue(t,!1);var r=new e.constructor;for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];t&&(a=mr(a,t)),r[n]=a}return r}function Cr(e,t,r){r=A.defaultValue(r,!1);var n,a,i,o={},s=D.defined(e),u=D.defined(t);if(s)for(n in e)e.hasOwnProperty(n)&&(a=e[n],u&&r&&"object"==typeof a&&t.hasOwnProperty(n)?(i=t[n],o[n]="object"==typeof i?Cr(a,i,r):a):o[n]=a);if(u)for(n in t)t.hasOwnProperty(n)&&!o.hasOwnProperty(n)&&(i=t[n],o[n]=i);return o}function wr(e,t){var r;return"undefined"!=typeof document&&(r=document),wr._implementation(e,t,r)}cr.prototype.resolve=function(e){var t=new cr;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?t.path=this.path:e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments(),t.query=this.query))),t.fragment=this.fragment,t},cr.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),r=[],n=""==t[0];n&&t.shift();for(""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?r.pop():"."!=e&&r.push(e);"."!=e&&".."!=e||r.push(""),n&&r.unshift(""),this.path=r.join("/")},cr.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},wr._implementation=function(e,t,r){if(!D.defined(e))throw new Q.DeveloperError("relative uri is required.");if(!D.defined(t)){if(void 0===r)return e;t=A.defaultValue(r.baseURI,r.location.href)}var n=new cr(t);return new cr(e).resolve(n).toString()};var vr,Or=/^blob:/i;function br(e){return Q.Check.typeOf.string("uri",e),Or.test(e)}var gr=/^data:/i;function xr(e){return Q.Check.typeOf.string("uri",e),gr.test(e)}var Er=Array.isArray;D.defined(Er)||(Er=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var kr=Er;var qr=t.freezeObject({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),jr=t.freezeObject({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function _r(e){e=A.defaultValue(e,A.defaultValue.EMPTY_OBJECT);var t=A.defaultValue(e.throttleByServer,!1),r=A.defaultValue(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=A.defaultValue(e.priority,0),this.throttle=r,this.throttleByServer=t,this.type=A.defaultValue(e.type,jr.OTHER),this.serverKey=void 0,this.state=qr.UNISSUED,this.deferred=void 0,this.cancelled=!1}function Sr(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0;n<r.length;++n){var a=r[n],i=a.indexOf(": ");if(0<i){var o=a.substring(0,i),s=a.substring(i+2);t[o]=s}}return t}(this.responseHeaders))}function Mr(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function Rr(e,t){return t-e}function Tr(e){Q.Check.typeOf.object("options",e),Q.Check.defined("options.comparator",e.comparator),this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Dr(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}_r.prototype.cancel=function(){this.cancelled=!0},_r.prototype.clone=function(e){return D.defined(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new _r(this)},Sr.prototype.toString=function(){var e="Request has failed.";return D.defined(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e},r.defineProperties(Mr.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),Mr.prototype.addEventListener=function(e,t){Q.Check.typeOf.func("listener",e),this._listeners.push(e),this._scopes.push(t);var r=this;return function(){r.removeEventListener(e,t)}},Mr.prototype.removeEventListener=function(e,t){Q.Check.typeOf.func("listener",e);for(var r=this._listeners,n=this._scopes,a=-1,i=0;i<r.length;i++)if(r[i]===e&&n[i]===t){a=i;break}return-1!==a&&(this._insideRaiseEvent?(this._toRemove.push(a),r[a]=void 0,n[a]=void 0):(r.splice(a,1),n.splice(a,1)),!0)},Mr.prototype.raiseEvent=function(){var e;this._insideRaiseEvent=!0;var t=this._listeners,r=this._scopes,n=t.length;for(e=0;e<n;e++){var a=t[e];D.defined(a)&&t[e].apply(r[e],arguments)}var i=this._toRemove;if(0<(n=i.length)){for(i.sort(Rr),e=0;e<n;e++){var o=i[e];t.splice(o,1),r.splice(o,1)}i.length=0}this._insideRaiseEvent=!1},r.defineProperties(Tr.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){this._maximumLength=e,this._length>e&&0<e&&(this._length=e,this._array.length=e)}},comparator:{get:function(){return this._comparator}}}),Tr.prototype.reserve=function(e){e=A.defaultValue(e,this._length),this._array.length=e},Tr.prototype.heapify=function(e){e=A.defaultValue(e,0);for(var t=this._length,r=this._comparator,n=this._array,a=-1,i=!0;i;){var o=2*(e+1),s=o-1;a=s<t&&r(n[s],n[e])<0?s:e,o<t&&r(n[o],n[a])<0&&(a=o),a!==e?(Dr(n,a,e),e=a):i=!1}},Tr.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);0<=t;--t)this.heapify(t)},Tr.prototype.insert=function(e){Q.Check.defined("element",e);var t,r=this._array,n=this._comparator,a=this._maximumLength,i=this._length++;for(i<r.length?r[i]=e:r.push(e);0!==i;){var o=Math.floor((i-1)/2);if(!(n(r[i],r[o])<0))break;Dr(r,i,o),i=o}return D.defined(a)&&this._length>a&&(t=r[a],this._length=a),t},Tr.prototype.pop=function(e){if(e=A.defaultValue(e,0),0!==this._length){Q.Check.typeOf.number.lessThan("index",e,this._length);var t=this._array,r=t[e];return Dr(t,e,--this._length),this.heapify(e),r}};var Ar={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},zr=20,Ir=new Tr({comparator:function(e,t){return e.priority-t.priority}});Ir.maximumLength=zr,Ir.reserve(zr);var Pr=[],Nr={},Ur="undefined"!=typeof document?new cr(document.location.href):new cr,Fr=new Mr;function Vr(){}function Lr(e){D.defined(e.priorityFunction)&&(e.priority=e.priorityFunction())}function Br(e){var t=A.defaultValue(Vr.requestsByServer[e],Vr.maximumRequestsPerServer);return Nr[e]<t}function Wr(e){return e.state===qr.UNISSUED&&(e.state=qr.ISSUED,e.deferred=d.when.defer()),e.deferred.promise}function Yr(e){var t,r,n=Wr(e);return e.state=qr.ACTIVE,Pr.push(e),++Ar.numberOfActiveRequests,++Ar.numberOfActiveRequestsEver,++Nr[e.serverKey],e.requestFunction().then((r=e,function(e){r.state!==qr.CANCELLED&&(--Ar.numberOfActiveRequests,--Nr[r.serverKey],Fr.raiseEvent(),r.state=qr.RECEIVED,r.deferred.resolve(e))})).otherwise((t=e,function(e){t.state!==qr.CANCELLED&&(++Ar.numberOfFailedRequests,--Ar.numberOfActiveRequests,--Nr[t.serverKey],Fr.raiseEvent(e),t.state=qr.FAILED,t.deferred.reject(e))})),n}function Hr(e){var t=e.state===qr.ACTIVE;e.state=qr.CANCELLED,++Ar.numberOfCancelledRequests,e.deferred.reject(),t&&(--Ar.numberOfActiveRequests,--Nr[e.serverKey],++Ar.numberOfCancelledActiveRequests),D.defined(e.cancelFunction)&&e.cancelFunction()}Vr.maximumRequests=50,Vr.maximumRequestsPerServer=6,Vr.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},Vr.throttleRequests=!0,Vr.debugShowStatistics=!1,Vr.requestCompletedEvent=Fr,r.defineProperties(Vr,{statistics:{get:function(){return Ar}},priorityHeapLength:{get:function(){return zr},set:function(e){if(e<zr)for(;Ir.length>e;){Hr(Ir.pop())}zr=e,Ir.maximumLength=e,Ir.reserve(e)}}}),Vr.update=function(){var e,t,r=0,n=Pr.length;for(e=0;e<n;++e)(t=Pr[e]).cancelled&&Hr(t),t.state===qr.ACTIVE?0<r&&(Pr[e-r]=t):++r;Pr.length-=r;var a=Ir.internalArray,i=Ir.length;for(e=0;e<i;++e)Lr(a[e]);Ir.resort();for(var o=Math.max(Vr.maximumRequests-Pr.length,0),s=0;s<o&&0<Ir.length;)(t=Ir.pop()).cancelled?Hr(t):!t.throttleByServer||Br(t.serverKey)?(Yr(t),++s):Hr(t);!function(){if(!Vr.debugShowStatistics)return;0===Ar.numberOfActiveRequests&&0<Ar.lastNumberOfActiveRequests&&(0<Ar.numberOfAttemptedRequests&&(console.log("Number of attempted requests: "+Ar.numberOfAttemptedRequests),Ar.numberOfAttemptedRequests=0),0<Ar.numberOfCancelledRequests&&(console.log("Number of cancelled requests: "+Ar.numberOfCancelledRequests),Ar.numberOfCancelledRequests=0),0<Ar.numberOfCancelledActiveRequests&&(console.log("Number of cancelled active requests: "+Ar.numberOfCancelledActiveRequests),Ar.numberOfCancelledActiveRequests=0),0<Ar.numberOfFailedRequests&&(console.log("Number of failed requests: "+Ar.numberOfFailedRequests),Ar.numberOfFailedRequests=0));Ar.lastNumberOfActiveRequests=Ar.numberOfActiveRequests}()},Vr.getServerKey=function(e){Q.Check.typeOf.string("url",e);var t=new cr(e).resolve(Ur);t.normalize();var r=t.authority;/:/.test(r)||(r=r+":"+("https"===t.scheme?"443":"80"));var n=Nr[r];return D.defined(n)||(Nr[r]=0),r},Vr.request=function(e){if(Q.Check.typeOf.object("request",e),Q.Check.typeOf.string("request.url",e.url),Q.Check.typeOf.func("request.requestFunction",e.requestFunction),xr(e.url)||br(e.url))return Fr.raiseEvent(),e.state=qr.RECEIVED,e.requestFunction();if(++Ar.numberOfAttemptedRequests,D.defined(e.serverKey)||(e.serverKey=Vr.getServerKey(e.url)),!e.throttleByServer||Br(e.serverKey)){if(!Vr.throttleRequests||!e.throttle)return Yr(e);if(!(Pr.length>=Vr.maximumRequests)){Lr(e);var t=Ir.insert(e);if(D.defined(t)){if(t===e)return;Hr(t)}return Wr(e)}}},Vr.clearForSpecs=function(){for(;0<Ir.length;){Hr(Ir.pop())}for(var e=Pr.length,t=0;t<e;++t)Hr(Pr[t]);Pr.length=0,Nr={},Ar.numberOfAttemptedRequests=0,Ar.numberOfActiveRequests=0,Ar.numberOfCancelledRequests=0,Ar.numberOfCancelledActiveRequests=0,Ar.numberOfFailedRequests=0,Ar.numberOfActiveRequestsEver=0,Ar.lastNumberOfActiveRequests=0},Vr.numberOfActiveRequestsByServer=function(e){return Nr[e]},Vr.requestHeap=Ir;var Zr={},Jr={};Zr.add=function(e,t){if(!D.defined(e))throw new Q.DeveloperError("host is required.");if(!D.defined(t)||t<=0)throw new Q.DeveloperError("port is required to be greater than 0.");var r=e.toLowerCase()+":"+t;D.defined(Jr[r])||(Jr[r]=!0)},Zr.remove=function(e,t){if(!D.defined(e))throw new Q.DeveloperError("host is required.");if(!D.defined(t)||t<=0)throw new Q.DeveloperError("port is required to be greater than 0.");var r=e.toLowerCase()+":"+t;D.defined(Jr[r])&&delete Jr[r]},Zr.contains=function(e){if(!D.defined(e))throw new Q.DeveloperError("url is required.");var t=function(e){var t=new cr(e);t.normalize();var r=t.getAuthority();if(D.defined(r)){if(-1!==r.indexOf("@"))r=r.split("@")[1];if(-1===r.indexOf(":")){var n=t.getScheme();if(D.defined(n)||(n=(n=window.location.protocol).substring(0,n.length-1)),"http"===n)r+=":80";else{if("https"!==n)return;r+=":443"}}return r}}(e);return!(!D.defined(t)||!D.defined(Jr[t]))},Zr.clear=function(){Jr={}};var Xr,Gr=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),(e.responseType="blob")===e.responseType}catch(e){return!1}}();function Qr(e,t,r,n){var a,i=e.query;if(!D.defined(i)||0===i.length)return{};if(-1===i.indexOf("=")){var o={};o[i]=void 0,a=o}else a=function(e){if(!D.defined(e))throw new Q.DeveloperError("queryString is required.");var t={};if(""===e)return t;for(var r=e.replace(/\+/g,"%20").split(/[&;]/),n=0,a=r.length;n<a;++n){var i=r[n].split("="),o=decodeURIComponent(i[0]),s=i[1];s=D.defined(s)?decodeURIComponent(s):"";var u=t[o];"string"==typeof u?t[o]=[u,s]:kr(u)?u.push(s):t[o]=s}return t}(i);t._queryParameters=r?tn(a,t._queryParameters,n):a,e.query=void 0}function Kr(e,t){var r=t._queryParameters,n=Object.keys(r);1!==n.length||D.defined(r[n[0]])?e.query=function(e){if(!D.defined(e))throw new Q.DeveloperError("obj is required.");var t="";for(var r in e)if(e.hasOwnProperty(r)){var n=e[r],a=encodeURIComponent(r)+"=";if(kr(n))for(var i=0,o=n.length;i<o;++i)t+=a+encodeURIComponent(n[i])+"&";else t+=a+encodeURIComponent(n)+"&"}return t=t.slice(0,-1)}(r):e.query=n[0]}function $r(e,t){return D.defined(e)?D.defined(e.clone)?e.clone():mr(e):t}function en(e){if(e.state===qr.ISSUED||e.state===qr.ACTIVE)throw new J.RuntimeError("The Resource is already being fetched.");e.state=qr.UNISSUED,e.deferred=void 0}function tn(e,t,r){if(!r)return Cr(e,t);var n=mr(e,!0);for(var a in t)if(t.hasOwnProperty(a)){var i=n[a],o=t[a];D.defined(i)?(Array.isArray(i)||(i=n[a]=[i]),n[a]=i.concat(o)):n[a]=Array.isArray(o)?o.slice():o}return n}function rn(e){"string"==typeof(e=A.defaultValue(e,A.defaultValue.EMPTY_OBJECT))&&(e={url:e}),Q.Check.typeOf.string("options.url",e.url),this._url=void 0,this._templateValues=$r(e.templateValues,{}),this._queryParameters=$r(e.queryParameters,{}),this.headers=$r(e.headers,{}),this.request=A.defaultValue(e.request,new _r),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=A.defaultValue(e.retryAttempts,0),this._retryCount=0;var t=new cr(e.url);Qr(t,this,!0,!0),t.fragment=void 0,this._url=t.toString()}function nn(e){var n=e.resource,a=e.flipY,i=e.preferImageBitmap,r=n.request;r.url=n.url,r.requestFunction=function(){var e=n.url,t=!1;n.isDataUri||n.isBlobUri||(t=n.isCrossOriginUrl);var r=d.when.defer();return rn._Implementations.createImage(e,t,r,a,i),r.promise};var t=Vr.request(r);if(D.defined(t))return t.otherwise(function(t){return r.state!==qr.FAILED?d.when.reject(t):n.retryOnError(t).then(function(e){return e?(r.state=qr.UNISSUED,r.deferred=void 0,nn({resource:n,flipY:a,preferImageBitmap:i})):d.when.reject(t)})})}rn.createIfNeeded=function(e){return e instanceof rn?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new rn({url:e})},rn.supportsImageBitmapOptions=function(){if(D.defined(Xr))return Xr;if("function"!=typeof createImageBitmap)return Xr=d.when.resolve(!1);return Xr=rn.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then(function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})}).then(function(e){return!0}).otherwise(function(){return!1})},r.defineProperties(rn,{isBlobSupported:{get:function(){return Gr}}}),r.defineProperties(rn.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){var t=new cr(e);Qr(t,this,!1),t.fragment=void 0,this._url=t.toString()}},extension:{get:function(){return function(e){if(!D.defined(e))throw new Q.DeveloperError("uri is required.");var t=new cr(e);t.normalize();var r=t.path,n=r.lastIndexOf("/");return-1!==n&&(r=r.substr(n+1)),r=-1===(n=r.lastIndexOf("."))?"":r.substr(n+1)}(this._url)}},isDataUri:{get:function(){return xr(this._url)}},isBlobUri:{get:function(){return br(this._url)}},isCrossOriginUrl:{get:function(){return function(e){D.defined(vr)||(vr=document.createElement("a")),vr.href=window.location.href;var t=vr.host,r=vr.protocol;return vr.href=e,vr.href=vr.href,r!==vr.protocol||t!==vr.host}(this._url)}},hasHeaders:{get:function(){return 0<Object.keys(this.headers).length}}}),rn.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;var r=new cr(this._url);e&&Kr(r,this);var n=r.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),a=this._templateValues;return n=n.replace(/{(.*?)}/g,function(e,t){var r=a[t];return D.defined(r)?encodeURIComponent(r):e}),t&&D.defined(this.proxy)&&(n=this.proxy.getURL(n)),n},rn.prototype.setQueryParameters=function(e,t){this._queryParameters=t?tn(this._queryParameters,e,!1):tn(e,this._queryParameters,!1)},rn.prototype.appendQueryParameters=function(e){this._queryParameters=tn(e,this._queryParameters,!0)},rn.prototype.setTemplateValues=function(e,t){this._templateValues=t?Cr(this._templateValues,e):Cr(e,this._templateValues)},rn.prototype.getDerivedResource=function(e){var t=this.clone();if(t._retryCount=0,D.defined(e.url)){var r=new cr(e.url);Qr(r,t,!0,A.defaultValue(e.preserveQueryParameters,!1)),r.fragment=void 0,t._url=r.resolve(new cr(wr(this._url))).toString()}return D.defined(e.queryParameters)&&(t._queryParameters=Cr(e.queryParameters,t._queryParameters)),D.defined(e.templateValues)&&(t._templateValues=Cr(e.templateValues,t.templateValues)),D.defined(e.headers)&&(t.headers=Cr(e.headers,t.headers)),D.defined(e.proxy)&&(t.proxy=e.proxy),D.defined(e.request)&&(t.request=e.request),D.defined(e.retryCallback)&&(t.retryCallback=e.retryCallback),D.defined(e.retryAttempts)&&(t.retryAttempts=e.retryAttempts),t},rn.prototype.retryOnError=function(e){var t=this.retryCallback;if("function"!=typeof t||this._retryCount>=this.retryAttempts)return d.when(!1);var r=this;return d.when(t(this,e)).then(function(e){return++r._retryCount,e})},rn.prototype.clone=function(e){return D.defined(e)||(e=new rn({url:this._url})),e._url=this._url,e._queryParameters=mr(this._queryParameters),e._templateValues=mr(this._templateValues),e.headers=mr(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},rn.prototype.getBaseUri=function(e){return function(e,t){if(!D.defined(e))throw new Q.DeveloperError("uri is required.");var r="",n=e.lastIndexOf("/");return-1!==n&&(r=e.substring(0,n+1)),t&&(e=new cr(e),D.defined(e.query)&&(r+="?"+e.query),D.defined(e.fragment)&&(r+="#"+e.fragment)),r}(this.getUrlComponent(e),e)},rn.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},rn.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},rn.fetchArrayBuffer=function(e){return new rn(e).fetchArrayBuffer()},rn.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},rn.fetchBlob=function(e){return new rn(e).fetchBlob()},rn.prototype.fetchImage=function(e){e=A.defaultValue(e,A.defaultValue.EMPTY_OBJECT);var t=A.defaultValue(e.preferImageBitmap,!1),r=A.defaultValue(e.preferBlob,!1),n=A.defaultValue(e.flipY,!1);if(en(this.request),!Gr||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!r)return nn({resource:this,flipY:n,preferImageBitmap:t});var a,i,o,s=this.fetchBlob();return D.defined(s)?rn.supportsImageBitmapOptions().then(function(e){return a=e&&t,s}).then(function(e){if(D.defined(e)){if(o=e,a)return rn.createImageBitmapFromBlob(e,{flipY:n,premultiplyAlpha:!1});var t=window.URL.createObjectURL(e);return nn({resource:i=new rn({url:t}),flipY:n,preferImageBitmap:!1})}}).then(function(e){if(D.defined(e))return e.blob=o,a||window.URL.revokeObjectURL(i.url),e}).otherwise(function(e){return D.defined(i)&&window.URL.revokeObjectURL(i.url),e.blob=o,d.when.reject(e)}):void 0},rn.fetchImage=function(e){return new rn(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},rn.prototype.fetchText=function(){return this.fetch({responseType:"text"})},rn.fetchText=function(e){return new rn(e).fetchText()},rn.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(D.defined(e))return e.then(function(e){if(D.defined(e))return JSON.parse(e)})},rn.fetchJson=function(e){return new rn(e).fetchJson()},rn.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},rn.fetchXML=function(e){return new rn(e).fetchXML()},rn.prototype.fetchJsonp=function(e){var t;for(e=A.defaultValue(e,"callback"),en(this.request);t="loadJsonp"+Math.random().toString().substring(2,8),D.defined(window[t]););return function r(n,a,i){var e={};e[a]=i;n.setQueryParameters(e);var o=n.request;o.url=n.url;o.requestFunction=function(){var t=d.when.defer();return window[i]=function(e){t.resolve(e);try{delete window[i]}catch(e){window[i]=void 0}},rn._Implementations.loadAndExecuteScript(n.url,i,t),t.promise};var t=Vr.request(o);if(!D.defined(t))return;return t.otherwise(function(t){return o.state!==qr.FAILED?d.when.reject(t):n.retryOnError(t).then(function(e){return e?(o.state=qr.UNISSUED,o.deferred=void 0,r(n,a,i)):d.when.reject(t)})})}(this,e,t)},rn.fetchJsonp=function(e){return new rn(e).fetchJsonp(e.callbackParameterName)},rn.prototype._makeRequest=function(s){var u=this;en(u.request);var c=u.request;c.url=u.url,c.requestFunction=function(){var e=s.responseType,t=Cr(s.headers,u.headers),r=s.overrideMimeType,n=s.method,a=s.data,i=d.when.defer(),o=rn._Implementations.loadWithXhr(u.url,e,n,a,t,i,r);return D.defined(o)&&D.defined(o.abort)&&(c.cancelFunction=function(){o.abort()}),i.promise};var e=Vr.request(c);if(D.defined(e))return e.then(function(e){return e}).otherwise(function(t){return c.state!==qr.FAILED?d.when.reject(t):u.retryOnError(t).then(function(e){return e?(c.state=qr.UNISSUED,c.deferred=void 0,u.fetch(s)):d.when.reject(t)})})};var an=/^data:(.*?)(;base64)?,(.*)$/;function on(e,t){var r=decodeURIComponent(t);return e?atob(r):r}function sn(e,t){for(var r=on(e,t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return n}function un(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}rn.prototype.fetch=function(e){return(e=$r(e,{})).method="GET",this._makeRequest(e)},rn.fetch=function(e){return new rn(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},rn.prototype.delete=function(e){return(e=$r(e,{})).method="DELETE",this._makeRequest(e)},rn.delete=function(e){return new rn(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},rn.prototype.head=function(e){return(e=$r(e,{})).method="HEAD",this._makeRequest(e)},rn.head=function(e){return new rn(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},rn.prototype.options=function(e){return(e=$r(e,{})).method="OPTIONS",this._makeRequest(e)},rn.options=function(e){return new rn(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},rn.prototype.post=function(e,t){return Q.Check.defined("data",e),(t=$r(t,{})).method="POST",t.data=e,this._makeRequest(t)},rn.post=function(e){return new rn(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},rn.prototype.put=function(e,t){return Q.Check.defined("data",e),(t=$r(t,{})).method="PUT",t.data=e,this._makeRequest(t)},rn.put=function(e){return new rn(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},rn.prototype.patch=function(e,t){return Q.Check.defined("data",e),(t=$r(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},rn.patch=function(e){return new rn(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},(rn._Implementations={}).createImage=function(i,o,s,u,c){rn.supportsImageBitmapOptions().then(function(e){return e&&c?rn.fetchBlob({url:i}).then(function(e){if(D.defined(e))return rn.createImageBitmapFromBlob(e,{flipY:u,premultiplyAlpha:!1});s.reject(new J.RuntimeError("Successfully retrieved "+i+" but it contained no content."))}).then(s.resolve):(t=i,r=o,n=s,(a=new Image).onload=function(){n.resolve(a)},a.onerror=function(e){n.reject(e)},r&&(Zr.contains(t)?a.crossOrigin="use-credentials":a.crossOrigin=""),void(a.src=t));var t,r,n,a}).otherwise(s.reject)},rn.createImageBitmapFromBlob=function(e,t){return Q.Check.defined("options",t),Q.Check.typeOf.bool("options.flipY",t.flipY),Q.Check.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var cn="undefined"==typeof XMLHttpRequest;function ln(e){if(e=A.defaultValue(e,A.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=A.defaultValue(e.addNewLeapSeconds,!0),D.defined(e.data))dn(this,e.data);else if(D.defined(e.url)){var t=rn.createIfNeeded(e.url),r=this;this._downloadPromise=d.when(t.fetchJson(),function(e){dn(r,e)},function(){r._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."})}else dn(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function fn(e,t){return sr.compare(e.julianDate,t)}function dn(e,t){if(D.defined(t.columnNames))if(D.defined(t.samples)){var r=t.columnNames.indexOf("modifiedJulianDateUtc"),n=t.columnNames.indexOf("xPoleWanderRadians"),a=t.columnNames.indexOf("yPoleWanderRadians"),i=t.columnNames.indexOf("ut1MinusUtcSeconds"),o=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),s=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("taiMinusUtcSeconds");if(r<0||n<0||a<0||i<0||o<0||s<0||u<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var c,l=e._samples=t.samples,f=e._dates=[];e._dateColumn=r,e._xPoleWanderRadiansColumn=n,e._yPoleWanderRadiansColumn=a,e._ut1MinusUtcSecondsColumn=i,e._xCelestialPoleOffsetRadiansColumn=o,e._yCelestialPoleOffsetRadiansColumn=s,e._taiMinusUtcSecondsColumn=u,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var d=e._addNewLeapSeconds,h=0,p=l.length;h<p;h+=e._columnCount){var y=l[h+r],m=l[h+u],C=new sr(y+Vt.MODIFIED_JULIAN_DATE_DIFFERENCE,m,Lt.TAI);if(f.push(C),d){if(m!==c&&D.defined(c)){var w=sr.leapSeconds,v=zt(w,C,fn);if(v<0){var O=new Ft(C,m);w.splice(~v,0,O)}}c=m}}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function hn(e,t,r,n,a){var i=r*n;a.xPoleWander=t[i+e._xPoleWanderRadiansColumn],a.yPoleWander=t[i+e._yPoleWanderRadiansColumn],a.xPoleOffset=t[i+e._xCelestialPoleOffsetRadiansColumn],a.yPoleOffset=t[i+e._yCelestialPoleOffsetRadiansColumn],a.ut1MinusUtc=t[i+e._ut1MinusUtcSecondsColumn]}function pn(e,t,r){return t+e*(r-t)}function yn(e,t,r,n,a,i,o){var s=e._columnCount;if(i>t.length-1)return o.xPoleWander=0,o.yPoleWander=0,o.xPoleOffset=0,o.yPoleOffset=0,o.ut1MinusUtc=0,o;var u=t[a],c=t[i];if(u.equals(c)||n.equals(u))return hn(e,r,a,s,o),o;if(n.equals(c))return hn(e,r,i,s,o),o;var l=sr.secondsDifference(n,u)/sr.secondsDifference(c,u),f=a*s,d=i*s,h=r[f+e._ut1MinusUtcSecondsColumn],p=r[d+e._ut1MinusUtcSecondsColumn],y=p-h;if(.5<y||y<-.5){var m=r[f+e._taiMinusUtcSecondsColumn],C=r[d+e._taiMinusUtcSecondsColumn];m!==C&&(c.equals(n)?h=p:p-=C-m)}return o.xPoleWander=pn(l,r[f+e._xPoleWanderRadiansColumn],r[d+e._xPoleWanderRadiansColumn]),o.yPoleWander=pn(l,r[f+e._yPoleWanderRadiansColumn],r[d+e._yPoleWanderRadiansColumn]),o.xPoleOffset=pn(l,r[f+e._xCelestialPoleOffsetRadiansColumn],r[d+e._xCelestialPoleOffsetRadiansColumn]),o.yPoleOffset=pn(l,r[f+e._yCelestialPoleOffsetRadiansColumn],r[d+e._yCelestialPoleOffsetRadiansColumn]),o.ut1MinusUtc=pn(l,h,p),o}function mn(e,t,r){this.heading=A.defaultValue(e,0),this.pitch=A.defaultValue(t,0),this.roll=A.defaultValue(r,0)}rn._Implementations.loadWithXhr=function(e,a,i,t,r,o,n){var s=an.exec(e);if(null===s){if(cn)return u=e,c=a,l=i,f=r,d=o,h=global.require,p=h("url").parse(u),y="https:"===p.protocol?h("https"):h("http"),m=h("zlib"),C={protocol:p.protocol,hostname:p.hostname,port:p.port,path:p.path,query:p.query,method:l,headers:f},void y.request(C).on("response",function(t){if(t.statusCode<200||300<=t.statusCode)d.reject(new Sr(t.statusCode,t,t.headers));else{var r=[];t.on("data",function(e){r.push(e)}),t.on("end",function(){var e=Buffer.concat(r);"gzip"===t.headers["content-encoding"]?m.gunzip(e,function(e,t){e?d.reject(new J.RuntimeError("Error decompressing response.")):d.resolve(un(t,c))}):d.resolve(un(e,c))})}}).on("error",function(e){d.reject(new Sr)}).end();var u,c,l,f,d,h,p,y,m,C,w=new XMLHttpRequest;if(Zr.contains(e)&&(w.withCredentials=!0),w.open(i,e,!0),D.defined(n)&&D.defined(w.overrideMimeType)&&w.overrideMimeType(n),D.defined(r))for(var v in r)r.hasOwnProperty(v)&&w.setRequestHeader(v,r[v]);D.defined(a)&&(w.responseType=a);var O=!1;return"string"==typeof e&&(O=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),w.onload=function(){if(!(w.status<200||300<=w.status)||O&&0===w.status){var e=w.response,t=w.responseType;if("HEAD"===i||"OPTIONS"===i){var r=w.getAllResponseHeaders().trim().split(/[\r\n]+/),n={};return r.forEach(function(e){var t=e.split(": "),r=t.shift();n[r]=t.join(": ")}),void o.resolve(n)}if(204===w.status)o.resolve();else if(!D.defined(e)||D.defined(a)&&t!==a)if("json"===a&&"string"==typeof e)try{o.resolve(JSON.parse(e))}catch(e){o.reject(e)}else(""===t||"document"===t)&&D.defined(w.responseXML)&&w.responseXML.hasChildNodes()?o.resolve(w.responseXML):""!==t&&"text"!==t||!D.defined(w.responseText)?o.reject(new J.RuntimeError("Invalid XMLHttpRequest response type.")):o.resolve(w.responseText);else o.resolve(e)}else o.reject(new Sr(w.status,w.response,w.getAllResponseHeaders()))},w.onerror=function(e){o.reject(new Sr)},w.send(t),w}o.resolve(function(e,t){t=A.defaultValue(t,"");var r=e[1],n=!!e[2],a=e[3];switch(t){case"":case"text":return on(n,a);case"arraybuffer":return sn(n,a);case"blob":var i=sn(n,a);return new Blob([i],{type:r});case"document":return(new DOMParser).parseFromString(on(n,a),r);case"json":return JSON.parse(on(n,a));default:throw new Q.DeveloperError("Unhandled responseType: "+t)}}(s,a))},rn._Implementations.loadAndExecuteScript=function(e,t,r){return function(e){var t=d.when.defer(),r=document.createElement("script");r.async=!0,r.src=e;var n=document.getElementsByTagName("head")[0];return r.onload=function(){r.onload=void 0,n.removeChild(r),t.resolve()},r.onerror=function(e){t.reject(e)},n.appendChild(r),t.promise}(e).otherwise(r.reject)},(rn._DefaultImplementations={}).createImage=rn._Implementations.createImage,rn._DefaultImplementations.loadWithXhr=rn._Implementations.loadWithXhr,rn._DefaultImplementations.loadAndExecuteScript=rn._Implementations.loadAndExecuteScript,rn.DEFAULT=t.freezeObject(new rn({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),ln.NONE=t.freezeObject({getPromiseToLoad:function(){return d.when()},compute:function(e,t){return D.defined(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new It(0,0,0,0,0),t}}),ln.prototype.getPromiseToLoad=function(){return d.when(this._downloadPromise)},ln.prototype.compute=function(e,t){if(D.defined(this._samples)){if(D.defined(t)||(t=new It(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var r=this._dates,n=this._lastIndex,a=0,i=0;if(D.defined(n)){var o=r[n],s=r[n+1],u=sr.lessThanOrEquals(o,e),c=!D.defined(s),l=c||sr.greaterThanOrEquals(s,e);if(u&&l)return a=n,!c&&s.equals(e)&&++a,i=a+1,yn(this,r,this._samples,e,a,i,t),t}var f=zt(r,e,sr.compare,this._dateColumn);return 0<=f?(f<r.length-1&&r[f+1].equals(e)&&++f,i=a=f):(a=(i=~f)-1)<0&&(a=0),this._lastIndex=a,yn(this,r,this._samples,e,a,i,t),t}if(D.defined(this._dataError))throw new J.RuntimeError(this._dataError)},mn.fromQuaternion=function(e,t){if(!D.defined(e))throw new Q.DeveloperError("quaternion is required");D.defined(t)||(t=new mn);var r=2*(e.w*e.y-e.z*e.x),n=1-2*(e.x*e.x+e.y*e.y),a=2*(e.w*e.x+e.y*e.z),i=1-2*(e.y*e.y+e.z*e.z),o=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(o,i),t.roll=Math.atan2(a,n),t.pitch=-Z.CesiumMath.asinClamped(r),t},mn.fromDegrees=function(e,t,r,n){if(!D.defined(e))throw new Q.DeveloperError("heading is required");if(!D.defined(t))throw new Q.DeveloperError("pitch is required");if(!D.defined(r))throw new Q.DeveloperError("roll is required");return D.defined(n)||(n=new mn),n.heading=e*Z.CesiumMath.RADIANS_PER_DEGREE,n.pitch=t*Z.CesiumMath.RADIANS_PER_DEGREE,n.roll=r*Z.CesiumMath.RADIANS_PER_DEGREE,n},mn.clone=function(e,t){if(D.defined(e))return D.defined(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new mn(e.heading,e.pitch,e.roll)},mn.equals=function(e,t){return e===t||D.defined(e)&&D.defined(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},mn.equalsEpsilon=function(e,t,r,n){return e===t||D.defined(e)&&D.defined(t)&&Z.CesiumMath.equalsEpsilon(e.heading,t.heading,r,n)&&Z.CesiumMath.equalsEpsilon(e.pitch,t.pitch,r,n)&&Z.CesiumMath.equalsEpsilon(e.roll,t.roll,r,n)},mn.prototype.clone=function(e){return mn.clone(this,e)},mn.prototype.equals=function(e){return mn.equals(this,e)},mn.prototype.equalsEpsilon=function(e,t,r){return mn.equalsEpsilon(this,e,t,r)},mn.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Cn,wn,vn,On=/((?:.*\/)|^)Cesium\.js$/;function bn(e){return"undefined"==typeof document?e:(D.defined(Cn)||(Cn=document.createElement("a")),Cn.href=e,Cn.href=Cn.href,Cn.href)}function gn(){if(D.defined(wn))return wn;var e;if(e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:"object"==typeof define&&D.defined(define.amd)&&!define.amd.toUrlUndefined&&D.defined(require.toUrl)?wr("..",kn("Core/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;++t){var n=e[t].getAttribute("src"),a=On.exec(n);if(null!==a)return a[1]}}(),!D.defined(e))throw new Q.DeveloperError("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.");return(wn=new rn({url:bn(e)})).appendForwardSlash(),wn}function xn(e){return bn(require.toUrl("../"+e))}function En(e){return gn().getDerivedResource({url:e}).url}function kn(e){return D.defined(vn)||(vn="object"==typeof define&&D.defined(define.amd)&&!define.amd.toUrlUndefined&&D.defined(require.toUrl)?xn:En),vn(e)}function qn(e,t,r){this.x=e,this.y=t,this.s=r}function jn(e){e=A.defaultValue(e,A.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=rn.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=A.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=A.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new sr(this._sampleZeroJulianEphemerisDate,0,Lt.TAI),this._stepSizeDays=A.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=A.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=A.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,r=this._denominators=new Array(t+1),n=this._xTable=new Array(t+1),a=Math.pow(this._stepSizeDays,t),i=0;i<=t;++i){r[i]=a,n[i]=i*this._stepSizeDays;for(var o=0;o<=t;++o)o!==i&&(r[i]*=i-o);r[i]=1/r[i]}this._work=new Array(t+1),this._coef=new Array(t+1)}kn._cesiumScriptRegex=On,kn._buildModuleUrlFromBaseUrl=En,kn._clearBaseResource=function(){wn=void 0},kn.setBaseUrl=function(e){wn=rn.DEFAULT.getDerivedResource({url:e})},kn.getCesiumBaseUrl=gn;var _n=new sr(0,0,Lt.TAI);function Sn(e,t,r){var n=_n;return n.dayNumber=t,n.secondsOfDay=r,sr.daysDifference(n,e._sampleZeroDateTT)}function Mn(o,s){if(o._chunkDownloadsInProgress[s])return o._chunkDownloadsInProgress[s];var e,u=d.when.defer();o._chunkDownloadsInProgress[s]=u;var t=o._xysFileUrlTemplate;return e=D.defined(t)?t.getDerivedResource({templateValues:{0:s}}):new rn({url:kn("Assets/IAU2006_XYS/IAU2006_XYS_"+s+".json")}),d.when(e.fetchJson(),function(e){o._chunkDownloadsInProgress[s]=!1;for(var t=o._samples,r=e.samples,n=s*o._samplesPerXysFile*3,a=0,i=r.length;a<i;++a)t[n+a]=r[a];u.resolve()}),u.promise}jn.prototype.preload=function(e,t,r,n){var a=Sn(this,e,t),i=Sn(this,r,n),o=a/this._stepSizeDays-this._interpolationOrder/2|0;o<0&&(o=0);var s=i/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;s>=this._totalSamples&&(s=this._totalSamples-1);for(var u=o/this._samplesPerXysFile|0,c=s/this._samplesPerXysFile|0,l=[],f=u;f<=c;++f)l.push(Mn(this,f));return d.when.all(l)},jn.prototype.computeXysRadians=function(e,t,r){var n=Sn(this,e,t);if(!(n<0)){var a=n/this._stepSizeDays|0;if(!(a>=this._totalSamples)){var i=this._interpolationOrder,o=a-(i/2|0);o<0&&(o=0);var s=o+i;s>=this._totalSamples&&(o=(s=this._totalSamples-1)-i)<0&&(o=0);var u=!1,c=this._samples;if(D.defined(c[3*o])||(Mn(this,o/this._samplesPerXysFile|0),u=!0),D.defined(c[3*s])||(Mn(this,s/this._samplesPerXysFile|0),u=!0),!u){D.defined(r)?(r.x=0,r.y=0,r.s=0):r=new qn(0,0,0);var l,f,d=n-o*this._stepSizeDays,h=this._work,p=this._denominators,y=this._coef,m=this._xTable;for(l=0;l<=i;++l)h[l]=d-m[l];for(l=0;l<=i;++l){for(y[l]=1,f=0;f<=i;++f)f!==l&&(y[l]*=h[f]);y[l]*=p[l];var C=3*(o+l);r.x+=y[l]*c[C++],r.y+=y[l]*c[C++],r.s+=y[l]*c[C]}return r}}}};var Rn={},Tn={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Dn={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},An={},zn={east:new z.Cartesian3,north:new z.Cartesian3,up:new z.Cartesian3,west:new z.Cartesian3,south:new z.Cartesian3,down:new z.Cartesian3},In=new z.Cartesian3,Pn=new z.Cartesian3,Nn=new z.Cartesian3;Rn.localFrameToFixedFrameGenerator=function(o,s){if(!Tn.hasOwnProperty(o)||!Tn[o].hasOwnProperty(s))throw new Q.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");var e,u=Tn[o][s],t=o+s;return D.defined(An[t])?e=An[t]:(e=function(e,t,r){if(!D.defined(e))throw new Q.DeveloperError("origin is required.");if(D.defined(r)||(r=new K),Z.CesiumMath.equalsEpsilon(e.x,0,Z.CesiumMath.EPSILON14)&&Z.CesiumMath.equalsEpsilon(e.y,0,Z.CesiumMath.EPSILON14)){var n=Z.CesiumMath.sign(e.z);z.Cartesian3.unpack(Dn[o],0,In),"east"!==o&&"west"!==o&&z.Cartesian3.multiplyByScalar(In,n,In),z.Cartesian3.unpack(Dn[s],0,Pn),"east"!==s&&"west"!==s&&z.Cartesian3.multiplyByScalar(Pn,n,Pn),z.Cartesian3.unpack(Dn[u],0,Nn),"east"!==u&&"west"!==u&&z.Cartesian3.multiplyByScalar(Nn,n,Nn)}else{(t=A.defaultValue(t,z.Ellipsoid.WGS84)).geodeticSurfaceNormal(e,zn.up);var a=zn.up,i=zn.east;i.x=-e.y,i.y=e.x,i.z=0,z.Cartesian3.normalize(i,zn.east),z.Cartesian3.cross(a,i,zn.north),z.Cartesian3.multiplyByScalar(zn.up,-1,zn.down),z.Cartesian3.multiplyByScalar(zn.east,-1,zn.west),z.Cartesian3.multiplyByScalar(zn.north,-1,zn.south),In=zn[o],Pn=zn[s],Nn=zn[u]}return r[0]=In.x,r[1]=In.y,r[2]=In.z,r[3]=0,r[4]=Pn.x,r[5]=Pn.y,r[6]=Pn.z,r[7]=0,r[8]=Nn.x,r[9]=Nn.y,r[10]=Nn.z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,r},An[t]=e),e},Rn.eastNorthUpToFixedFrame=Rn.localFrameToFixedFrameGenerator("east","north"),Rn.northEastDownToFixedFrame=Rn.localFrameToFixedFrameGenerator("north","east"),Rn.northUpEastToFixedFrame=Rn.localFrameToFixedFrameGenerator("north","up"),Rn.northWestUpToFixedFrame=Rn.localFrameToFixedFrameGenerator("north","west");var Un=new it,Fn=new z.Cartesian3(1,1,1),Vn=new K;Rn.headingPitchRollToFixedFrame=function(e,t,r,n,a){Q.Check.typeOf.object("HeadingPitchRoll",t),n=A.defaultValue(n,Rn.eastNorthUpToFixedFrame);var i=it.fromHeadingPitchRoll(t,Un),o=K.fromTranslationQuaternionRotationScale(z.Cartesian3.ZERO,i,Fn,Vn);return a=n(e,r,a),K.multiply(a,o,a)};var Ln=new K,Bn=new X;Rn.headingPitchRollQuaternion=function(e,t,r,n,a){Q.Check.typeOf.object("HeadingPitchRoll",t);var i=Rn.headingPitchRollToFixedFrame(e,t,r,n,Ln),o=K.getMatrix3(i,Bn);return it.fromRotationMatrix(o,a)};var Wn=new z.Cartesian3(1,1,1),Yn=new z.Cartesian3,Hn=new K,Zn=new K,Jn=new X,Xn=new it;Rn.fixedFrameToHeadingPitchRoll=function(e,t,r,n){Q.Check.defined("transform",e),t=A.defaultValue(t,z.Ellipsoid.WGS84),r=A.defaultValue(r,Rn.eastNorthUpToFixedFrame),D.defined(n)||(n=new mn);var a=K.getTranslation(e,Yn);if(z.Cartesian3.equals(a,z.Cartesian3.ZERO))return n.heading=0,n.pitch=0,n.roll=0,n;var i=K.inverseTransformation(r(a,t,Hn),Hn),o=K.setScale(e,Wn,Zn);o=K.setTranslation(o,z.Cartesian3.ZERO,o),i=K.multiply(i,o,i);var s=it.fromRotationMatrix(K.getMatrix3(i,Jn),Xn);return s=it.normalize(s,s),mn.fromQuaternion(s,n)};var Gn=Z.CesiumMath.TWO_PI/86400,Qn=new sr;Rn.computeTemeToPseudoFixedMatrix=function(e,t){if(!D.defined(e))throw new Q.DeveloperError("date is required.");var r,n=(Qn=sr.addSeconds(e,-sr.computeTaiMinusUtc(e),Qn)).dayNumber,a=Qn.secondsOfDay,i=n-2451545,o=(24110.54841+(r=43200<=a?(.5+i)/Vt.DAYS_PER_JULIAN_CENTURY:(i-.5)/Vt.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+r*(.093104+-62e-7*r)))*Gn%Z.CesiumMath.TWO_PI+(72921158553e-15+11772758384668e-32*(n-2451545.5))*((a+.5*Vt.SECONDS_PER_DAY)%Vt.SECONDS_PER_DAY),s=Math.cos(o),u=Math.sin(o);return D.defined(t)?(t[0]=s,t[1]=-u,t[2]=0,t[3]=u,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new X(s,u,0,-u,s,0,0,0,1)},Rn.iau2006XysData=new jn,Rn.earthOrientationParameters=ln.NONE;var Kn=32.184;Rn.preloadIcrfFixed=function(e){var t=e.start.dayNumber,r=e.start.secondsOfDay+Kn,n=e.stop.dayNumber,a=e.stop.secondsOfDay+Kn,i=Rn.iau2006XysData.preload(t,r,n,a),o=Rn.earthOrientationParameters.getPromiseToLoad();return d.when.all([i,o])},Rn.computeIcrfToFixedMatrix=function(e,t){if(!D.defined(e))throw new Q.DeveloperError("date is required.");D.defined(t)||(t=new X);var r=Rn.computeFixedToIcrfMatrix(e,t);if(D.defined(r))return X.transpose(r,t)};var $n=new qn(0,0,0),ea=new It(0,0,0,0,0,0),ta=new X,ra=new X;Rn.computeFixedToIcrfMatrix=function(e,t){if(!D.defined(e))throw new Q.DeveloperError("date is required.");D.defined(t)||(t=new X);var r=Rn.earthOrientationParameters.compute(e,ea);if(D.defined(r)){var n=e.dayNumber,a=e.secondsOfDay+Kn,i=Rn.iau2006XysData.computeXysRadians(n,a,$n);if(D.defined(i)){var o=i.x+r.xPoleOffset,s=i.y+r.yPoleOffset,u=1/(1+Math.sqrt(1-o*o-s*s)),c=ta;c[0]=1-u*o*o,c[3]=-u*o*s,c[6]=o,c[1]=-u*o*s,c[4]=1-u*s*s,c[7]=s,c[2]=-o,c[5]=-s,c[8]=1-u*(o*o+s*s);var l=X.fromRotationZ(-i.s,ra),f=X.multiply(c,l,ta),d=e.dayNumber-2451545,h=(e.secondsOfDay-sr.computeTaiMinusUtc(e)+r.ut1MinusUtc)/Vt.SECONDS_PER_DAY,p=.779057273264+h+.00273781191135448*(d+h);p=p%1*Z.CesiumMath.TWO_PI;var y=X.fromRotationZ(p,ra),m=X.multiply(f,y,ta),C=Math.cos(r.xPoleWander),w=Math.cos(r.yPoleWander),v=Math.sin(r.xPoleWander),O=Math.sin(r.yPoleWander),b=n-2451545+a/Vt.SECONDS_PER_DAY,g=-47e-6*(b/=36525)*Z.CesiumMath.RADIANS_PER_DEGREE/3600,x=Math.cos(g),E=Math.sin(g),k=ra;return k[0]=C*x,k[1]=C*E,k[2]=v,k[3]=-w*E+O*v*x,k[4]=w*x+O*v*E,k[5]=-O*C,k[6]=-O*E-w*v*x,k[7]=O*x-w*v*E,k[8]=w*C,X.multiply(m,k,t)}}};var na=new G;Rn.pointToWindowCoordinates=function(e,t,r,n){return(n=Rn.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n},Rn.pointToGLWindowCoordinates=function(e,t,r,n){if(!D.defined(e))throw new Q.DeveloperError("modelViewProjectionMatrix is required.");if(!D.defined(t))throw new Q.DeveloperError("viewportTransformation is required.");if(!D.defined(r))throw new Q.DeveloperError("point is required.");D.defined(n)||(n=new z.Cartesian2);var a=na;return K.multiplyByVector(e,G.fromElements(r.x,r.y,r.z,1,a),a),G.multiplyByScalar(a,1/a.w,a),K.multiplyByVector(t,a,a),z.Cartesian2.fromCartesian4(a,n)};var aa=new z.Cartesian3,ia=new z.Cartesian3,oa=new z.Cartesian3;Rn.rotationMatrixFromPositionVelocity=function(e,t,r,n){if(!D.defined(e))throw new Q.DeveloperError("position is required.");if(!D.defined(t))throw new Q.DeveloperError("velocity is required.");var a=A.defaultValue(r,z.Ellipsoid.WGS84).geodeticSurfaceNormal(e,aa),i=z.Cartesian3.cross(t,a,ia);z.Cartesian3.equalsEpsilon(i,z.Cartesian3.ZERO,Z.CesiumMath.EPSILON6)&&(i=z.Cartesian3.clone(z.Cartesian3.UNIT_X,i));var o=z.Cartesian3.cross(i,t,oa);return z.Cartesian3.normalize(o,o),z.Cartesian3.cross(t,o,i),z.Cartesian3.negate(i,i),z.Cartesian3.normalize(i,i),D.defined(n)||(n=new X),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=i.x,n[4]=i.y,n[5]=i.z,n[6]=o.x,n[7]=o.y,n[8]=o.z,n};var sa=new K(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),ua=new z.Cartographic,ca=new z.Cartesian3,la=new z.Cartesian3,fa=new X,da=new K,ha=new K;Rn.basisTo2D=function(e,t,r){if(!D.defined(e))throw new Q.DeveloperError("projection is required.");if(!D.defined(t))throw new Q.DeveloperError("matrix is required.");if(!D.defined(r))throw new Q.DeveloperError("result is required.");var n=K.getTranslation(t,la),a=e.ellipsoid,i=a.cartesianToCartographic(n,ua),o=e.project(i,ca);z.Cartesian3.fromElements(o.z,o.x,o.y,o);var s=Rn.eastNorthUpToFixedFrame(n,a,da),u=K.inverseTransformation(s,ha),c=K.getMatrix3(t,fa),l=K.multiplyByMatrix3(u,c,r);return K.multiply(sa,l,r),K.setTranslation(r,o,r),r},Rn.wgs84To2DModelMatrix=function(e,t,r){if(!D.defined(e))throw new Q.DeveloperError("projection is required.");if(!D.defined(t))throw new Q.DeveloperError("center is required.");if(!D.defined(r))throw new Q.DeveloperError("result is required.");var n=e.ellipsoid,a=Rn.eastNorthUpToFixedFrame(t,n,da),i=K.inverseTransformation(a,ha),o=n.cartesianToCartographic(t,ua),s=e.project(o,ca);z.Cartesian3.fromElements(s.z,s.x,s.y,s);var u=K.fromTranslation(s,da);return K.multiply(sa,i,r),K.multiply(u,r,r),r},e.BoundingSphere=I,e.Cartesian4=G,e.FeatureDetection=at,e.GeographicProjection=n,e.Intersect=o,e.Interval=s,e.Matrix3=X,e.Matrix4=K,e.Quaternion=it,e.Resource=rn,e.Transforms=Rn,e.buildModuleUrl=kn,e.deprecationWarning=x,e.isArray=kr,e.oneTimeWarning=g});
