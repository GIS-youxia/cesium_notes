define(["exports","./when-26c48098","./Math-ed5c253c","./Cartesian2-61a45043","./arrayRemoveDuplicates-e48f1acb","./PolylinePipeline-660b74f2"],function(e,f,A,C,w,b){"use strict";var i={};var M=new C.Cartographic,E=new C.Cartographic;function F(e,i,t,r){var a=(i=w.arrayRemoveDuplicates(i,C.Cartesian3.equalsEpsilon)).length;if(!(a<2)){var n=f.defined(r),o=f.defined(t),l=new Array(a),s=new Array(a),h=new Array(a),g=i[0];l[0]=g;var p=e.cartesianToCartographic(g,M);o&&(p.height=t[0]),s[0]=p.height,h[0]=n?r[0]:0;for(var u,c,d=s[0]===h[0],v=1,y=1;y<a;++y){var m=i[y],P=e.cartesianToCartographic(m,E);o&&(P.height=t[y]),d=d&&0===P.height,u=p,c=P,A.CesiumMath.equalsEpsilon(u.latitude,c.latitude,A.CesiumMath.EPSILON10)&&A.CesiumMath.equalsEpsilon(u.longitude,c.longitude,A.CesiumMath.EPSILON10)?p.height<P.height&&(s[v-1]=P.height):(l[v]=m,s[v]=P.height,h[v]=n?r[y]:0,d=d&&s[v]===h[v],C.Cartographic.clone(P,p),++v)}if(!(d||v<2))return l.length=v,s.length=v,h.length=v,{positions:l,topHeights:s,bottomHeights:h}}}var H=new Array(2),L=new Array(2),q={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};i.computePositions=function(e,i,t,r,a,n){var o=F(e,i,t,r);if(f.defined(o)){i=o.positions,t=o.topHeights,r=o.bottomHeights;var l,s,h=i.length,g=h-2,p=A.CesiumMath.chordLength(a,e.maximumRadius),u=q;if(u.minDistance=p,u.ellipsoid=e,n){for(var c=0,d=0;d<h-1;d++)c+=b.PolylinePipeline.numberOfPoints(i[d],i[d+1],p)+1;l=new Float64Array(3*c),s=new Float64Array(3*c);var v=H,y=L;u.positions=v,u.height=y;var m=0;for(d=0;d<h-1;d++){v[0]=i[d],v[1]=i[d+1],y[0]=t[d],y[1]=t[d+1];var P=b.PolylinePipeline.generateArc(u);l.set(P,m),y[0]=r[d],y[1]=r[d+1],s.set(b.PolylinePipeline.generateArc(u),m),m+=P.length}}else u.positions=i,u.height=t,l=new Float64Array(b.PolylinePipeline.generateArc(u)),u.height=r,s=new Float64Array(b.PolylinePipeline.generateArc(u));return{bottomPositions:s,topPositions:l,numCorners:g}}},e.WallGeometryLibrary=i});
