define(["exports","./when-cbf8cd21","./Math-e66fad2a","./Cartesian2-44433f55","./arrayRemoveDuplicates-b817241d","./PolylinePipeline-8156ffa9"],function(e,P,A,C,w,b){"use strict";var i={};var M=new C.Cartographic,E=new C.Cartographic;var F=new Array(2),H=new Array(2),L={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};i.computePositions=function(e,i,t,a,r,n){var o=function(e,i,t,a){var r=(i=w.arrayRemoveDuplicates(i,C.Cartesian3.equalsEpsilon)).length;if(!(r<2)){var n=P.defined(a),o=P.defined(t),l=new Array(r),s=new Array(r),h=new Array(r),g=i[0];l[0]=g;var p=e.cartesianToCartographic(g,M);o&&(p.height=t[0]),s[0]=p.height,h[0]=n?a[0]:0;for(var u,c,d=s[0]===h[0],f=1,v=1;v<r;++v){var y=i[v],m=e.cartesianToCartographic(y,E);o&&(m.height=t[v]),d=d&&0===m.height,u=p,c=m,A.CesiumMath.equalsEpsilon(u.latitude,c.latitude,A.CesiumMath.EPSILON10)&&A.CesiumMath.equalsEpsilon(u.longitude,c.longitude,A.CesiumMath.EPSILON10)?p.height<m.height&&(s[f-1]=m.height):(l[f]=y,s[f]=m.height,h[f]=n?a[v]:0,d=d&&s[f]===h[f],C.Cartographic.clone(m,p),++f)}if(!(d||f<2))return l.length=f,s.length=f,h.length=f,{positions:l,topHeights:s,bottomHeights:h}}}(e,i,t,a);if(P.defined(o)){i=o.positions,t=o.topHeights,a=o.bottomHeights;var l,s,h=i.length,g=h-2,p=A.CesiumMath.chordLength(r,e.maximumRadius),u=L;if(u.minDistance=p,u.ellipsoid=e,n){var c,d=0;for(c=0;c<h-1;c++)d+=b.PolylinePipeline.numberOfPoints(i[c],i[c+1],p)+1;l=new Float64Array(3*d),s=new Float64Array(3*d);var f=F,v=H;u.positions=f,u.height=v;var y=0;for(c=0;c<h-1;c++){f[0]=i[c],f[1]=i[c+1],v[0]=t[c],v[1]=t[c+1];var m=b.PolylinePipeline.generateArc(u);l.set(m,y),v[0]=a[c],v[1]=a[c+1],s.set(b.PolylinePipeline.generateArc(u),y),y+=m.length}}else u.positions=i,u.height=t,l=new Float64Array(b.PolylinePipeline.generateArc(u)),u.height=a,s=new Float64Array(b.PolylinePipeline.generateArc(u));return{bottomPositions:s,topPositions:l,numCorners:g}}},e.WallGeometryLibrary=i});
